<?xml version='1.0' encoding='UTF-8'?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0"><channel><title>SiHuan's Blog</title><link>/</link><description>道阻且长，吾意思还。</description><docs>http://www.rssboard.org/rss-specification</docs><generator>python-feedgen</generator><image><url>/logo.png</url><title>SiHuan's Blog</title><link>/</link></image><language>zh-CN</language><lastBuildDate>Thu, 26 Nov 2020 07:49:43 +0806</lastBuildDate><pubDate>Thu, 26 Nov 2020 07:49:43 +0806</pubDate><item><title>下雪了</title><link>/archives/下雪了/</link><description>&lt;p&gt;昨天下了一天雪❄️
今天早上出去转了一圈拍了一些照片
真的冷啊&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="5504" data-height="3096" src="/archives/assets/1818cd9b0d9c421ccc4aea20010b1025.jpg" alt="房前的菜地" /&gt;&lt;figcaption&gt;房前的菜地&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="5504" data-height="3096" src="/archives/assets/36b904d5b154c14754f333e71d8b10cb.jpg" alt="田地和雾" /&gt;&lt;figcaption&gt;田地和雾&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="5504" data-height="3096" src="/archives/assets/25a97fb29127a21a4f2b2f7786e7ca07.jpg" alt="白了屋顶" /&gt;&lt;figcaption&gt;白了屋顶&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
</description><author>sihuan@sakuya.love (SiHuan)</author><guid isPermaLink="true">/archives/下雪了/</guid><pubDate>Wed, 08 Jan 2020 09:06:00 +0806</pubDate></item><item><title>使用 pb 分享代码</title><link>/archives/使用pb分享代码/</link><description>&lt;blockquote&gt;&lt;p&gt;PrivateBin 在线匿名粘贴版？大概吧&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;分享代码给其他人的时候，发送文件太麻烦，直接把代码发过去的话有没有高亮和缩进而且会刷屏！&lt;/p&gt;
&lt;p&gt;可以使用 pb 服务来解决这一个问题 ´ ▽ ` )ﾉ&lt;/p&gt;
&lt;p&gt;下面就以 ArchCN 的 &lt;a href="https://fars.ee/"&gt;fc 老师搭建的 pb&lt;/a&gt; 为例，康一下用法 (其实大多都会给出用法,我只是搬运工&lt;/p&gt;
&lt;p&gt;首先要注意的是 pb 给的说明：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;fars.ee is a temporary deployment of pb by farseerfc

pb is a lightweight pastebin (and url shortener) built using flask.

All data may be erased without notifications. Please do NOT post large files.&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;使用方式&lt;/h3&gt;
&lt;h4&gt;1.使用 web 页面上传文本&lt;/h4&gt;
&lt;blockquote&gt;&lt;p&gt;并不是大家都会提供 web 页面的！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;地址：&lt;a href="https://fars.ee/f"&gt;https://fars.ee/f&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1431" data-height="803" src="/archives/assets/d6035f9e8690a01f0a9bb9592aaa5f43.png" alt="web 页面长这样" /&gt;&lt;figcaption&gt;web 页面长这样&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4&gt;2.使用命令行&lt;/h4&gt;
&lt;blockquote&gt;&lt;p&gt;Create a new paste from the output of &lt;code&gt;cmd&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;cmd | curl -F "c=@-" "https://fars.ee/"&lt;/code&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p&gt;上传一个命令的输出&lt;/p&gt;
&lt;p&gt;例如&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ls &lt;span class="p"&gt;|&lt;/span&gt; curl -F &lt;span class="s2"&gt;&amp;quot;c=@-&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;https://fars.ee/&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;就将 &lt;code&gt;ls&lt;/code&gt;命令的输出上传上去了，你会得到&lt;/p&gt;

&lt;pre&gt;&lt;code&gt; date: 2020-03-11T06:03:05.110297+00:00
 digest: 2471f7b7a504e790a013fd092a3109a4c58c96f0
 long: ACRx97elBOeQoBP9CSoxCaTFjJbw
 short: jJbw
 size: 88
 status: created
 url: https://fars.ee/jJbw
 uuid: 409d0a8a-5d4a-4159-bb5e-cbb43934cf57&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;其中的 &lt;code&gt;url: https://fars.ee/jJbw&lt;/code&gt; 就是你的地址啦，打开就可以看到你上传的文本&lt;/p&gt;
&lt;p&gt;语法高亮！&lt;/p&gt;
&lt;p&gt;首先让我们来上传一段代码&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl -F &lt;span class="s2"&gt;&amp;quot;c=@-&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;https://fars.ee/&amp;quot;&lt;/span&gt; &amp;lt; main.c
&lt;span class="c1"&gt;# 或或者这样&lt;/span&gt;
&lt;span class="c1"&gt;# cat main.c | curl -F &amp;quot;c=@-&amp;quot; &amp;quot;https://fars.ee/&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这时候我们直接访问得到的 url ( 这儿是 &lt;a href="https://fars.ee/MXKe"&gt;https://fars.ee/MXKe&lt;/a&gt; )，还是不会高亮的，在结尾加上语言标记就好了&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;https://fars.ee/MXKe/c&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;我把它标记为了 C 语言，访问的时候就会以 C 语言的语法来高亮代码了。其实还可以在末尾追加 &lt;code&gt;#L-n&lt;/code&gt; 来更醒目的提醒代码的第&lt;code&gt;n&lt;/code&gt; 行。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;https://fars.ee/MXKe/c#L-3&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;3.更多的快乐！&lt;/h4&gt;
&lt;p&gt;其实 pb 服务不只可以分享文本，图片和文件都是可以的哟，但是为了避免给所有者造成负担大家一定要&lt;strong&gt;遵守规则，不要滥用&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;下面就给出另外几个比较好用分享 文本、图片、文件的网站&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href="https://cfp.vim-cn.com/"&gt;https://cfp.vim-cn.com/&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;可以贴文本，支持语法高亮&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href="https://img.vim-cn.com/"&gt;https://img.vim-cn.com/&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;贴图片和文件&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href="https://ttm.sh/"&gt;https://ttm.sh/&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;贴文件，最大可以到 256 M&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href="https://transfer.sh/"&gt;https://transfer.sh/&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;一个接近临时网盘的东西，支持超大文件，可以去看官方说明&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;更便捷一点&lt;/h3&gt;
&lt;p&gt;如果每次都要输入像 &lt;code&gt;curl -F "c=@-" "https://fars.ee/"&lt;/code&gt; 这么一大串的话，有点不方便我们可以利用一个命令别名或者 shell 函数来简化操作&lt;/p&gt;
&lt;h4&gt;使用别名&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 添加别名 也可以添加到 ~/.bashrc 中去&lt;/span&gt;
$ &lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;pb&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;curl -F &amp;quot;c=@-&amp;quot; &amp;quot;https://fars.ee/&amp;quot;&amp;#39;&lt;/span&gt; 
&lt;span class="c1"&gt;# 愉快的使用&lt;/span&gt;
$ cat main.py &lt;span class="p"&gt;|&lt;/span&gt; pb
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;使用 shell 函数&lt;/h4&gt;
&lt;blockquote&gt;&lt;p&gt;使用函数的话，就可以完成更多的操作，比如按文件名上传多个文件，又或者接下来要说的把得到的 url 复制到剪切板&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;因为要复制到剪切板，这儿依赖了 &lt;code&gt;xclip&lt;/code&gt; 这个工具，要提前装好，Archlinux 的话就&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo pacman -S xclip
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;然后在 &lt;code&gt;~/.bashrc&lt;/code&gt; 添加&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;fs&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  curl -s -F &lt;span class="s2"&gt;&amp;quot;c=@&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;1&lt;/span&gt;&lt;span class="k"&gt;:-&lt;/span&gt;&lt;span class="p"&gt;-&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;https://fars.ee/?u=1&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; tee /dev/tty &lt;span class="p"&gt;|&lt;/span&gt; perl -p -e &lt;span class="s1"&gt;&amp;#39;chomp if eof&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; xclip -selection clipboard -i
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;上面的函数抄袭自 &lt;a href="https://github.com/farseerfc/dotfiles/blob/master/zsh/.bashrc"&gt;farseerfc 的 dotfiles&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这样当你 &lt;code&gt;cmd | fs&lt;/code&gt;  的时候，url 就会自动复制到剪切板啦。&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;吹一下 kdeconnect  , 如果你用了 kdeconnect 的话剪切板就自己同步到手机了！&lt;/p&gt;
&lt;/blockquote&gt;
</description><author>sihuan@sakuya.love (SiHuan)</author><guid isPermaLink="true">/archives/使用pb分享代码/</guid><pubDate>Wed, 11 Mar 2020 11:06:00 +0806</pubDate></item><item><title>vps2arch!</title><link>/archives/vps2arch/</link><description>&lt;blockquote&gt;&lt;p&gt;有些 vps 服务商是不提供 Arch 系统的，但是你仍然可以通过 vps2arch 脚本将你的系统切换到 Archlinux&lt;/p&gt;
&lt;p&gt;这个项目托管在 gitlab : &lt;a href="https://gitlab.com/drizzt/vps2arch/"&gt;https://gitlab.com/drizzt/vps2arch/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;准备&lt;/h2&gt;
&lt;h3&gt;读项目介绍&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;This script is used to convert a &lt;em&gt;VPS&lt;/em&gt;, running another linux distro, to &lt;em&gt;Arch Linux&lt;/em&gt;.
 It should be &lt;strong&gt;only&lt;/strong&gt; used if your &lt;em&gt;VPS&lt;/em&gt; provider doesn't provide you an &lt;em&gt;Arch Linux&lt;/em&gt; image.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;读项目免责&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;I'm not responsible for any damage in your system and/or any violation of the agreement between you and your vps provider.
 &lt;strong&gt;Use at your own risk!&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;准备系统&lt;/h3&gt;
&lt;p&gt;你需要有一个干净的系统，既然都要把系统重新安装成 Arch 了，提前重置一下系统不为过吧。&lt;/p&gt;
&lt;p&gt;推荐重置为 &lt;code&gt;CentOS&lt;/code&gt; 或者 &lt;code&gt;Debain&lt;/code&gt; 这个脚本在 &lt;code&gt;Ubuntu 18&lt;/code&gt; 上也许有一些问题。&lt;/p&gt;
&lt;h2&gt;开干&lt;/h2&gt;
&lt;p&gt;使用 SSH 链接到你的 VPS，在开始之前你可以修改一下 root 密码，以为 vps2arch 会将新系统的密码设置为你运行脚本之前的 root 密码&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;passwd root
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;你需要输入两次新密码，并且输入密码没有回显&lt;/p&gt;
&lt;p&gt;接下来就是重点了，以 root 身份执行一下命令&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 下载 vps2arch 脚本&lt;/span&gt;
&lt;span class="c1"&gt;# wget https://tinyurl.com/vps2arch 也会被重定向到以下 url&lt;/span&gt;
wget https://gitlab.com/drizzt/vps2arch/-/raw/master/vps2arch
&lt;span class="c1"&gt;# 赋予执行权限&lt;/span&gt;
chmod +x vps2arch
&lt;span class="c1"&gt;# 启动脚本！&lt;/span&gt;
./vps2arch
&lt;span class="c1"&gt;# 当你从脚本默认的源下载速度较慢的时候，可以使用 -m 参数指定源，例如&lt;/span&gt;
&lt;span class="c1"&gt;# ./vps2arch -m https://mirrors.neusoft.edu.cn/archlinux/&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;深呼吸，不出意外的话，等待几分钟你会得到这样的提示&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;When you are finished with your post-installation, you'll need to reboot the VM the rough way:
        # sync ; reboot -f

Then you'll be able to connect to your VM using SSH and to login using your old root password (or "vps2arch" if you didn't have a root password).&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;按照提示执行 &lt;code&gt;sync ; reoot -f&lt;/code&gt; 重启你的 VPS。&lt;/p&gt;
&lt;p&gt;这时候你的 SSH 链接会断掉，在 VPS 重启的这几分钟里，你需要去 &lt;code&gt;~/.ssh/konwn_host&lt;/code&gt; 里删除掉刚刚运行 vps2arch 脚本的主机所在的行，因为换了新系统了你的电脑已经不再认识远程主机了，不这么做的话你在下次链接的时候会得到一个错误。稍等一会 &lt;code&gt;ssh root@yourip&lt;/code&gt; 输入之前的 root 密码&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Welcome to ArchLinux!&lt;/strong&gt;&lt;/p&gt;
&lt;h2&gt;之后的配置&lt;/h2&gt;
&lt;p&gt;现在你已经得到一个崭新的 ArchLinux 系统了，接下来是在正常使用之前的一些建议，以下建议多来源于 &lt;a href="https://wiki.archlinux.org/index.php/Installation_guide"&gt;ArchWiki&lt;/a&gt; .&lt;/p&gt;
&lt;h3&gt;时间设置&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 使用 ntp&lt;/span&gt;
timedatectl set-ntp &lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="c1"&gt;# 设置时区&lt;/span&gt;
ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
hwclock --systohc
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;设置中文&lt;/h3&gt;
&lt;p&gt;这时候你的系统还是不支持中文的，输入中文将会乱码，我们需要进行一下操作。&lt;/p&gt;
&lt;p&gt;编辑 &lt;code&gt;/etc/locale.gen&lt;/code&gt; 取消一下行的注释（你可能需要一个编辑器，如 &lt;code&gt;vim&lt;/code&gt;，请自行安装）&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;en_US.UTF-8 UTF-8
zh_CN.UTF-8 UTF-8
zh_TW.UTF-8 UTF-8&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;执行 &lt;code&gt;locale-gen&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;创建 &lt;code&gt;/etc/locale.conf&lt;/code&gt; 并编辑 &lt;code&gt;LANG&lt;/code&gt; 这一 &lt;a href="https://wiki.archlinux.org/index.php/Variable"&gt;变量&lt;/a&gt;，比如：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;LANG=en_US.UTF-8&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;添加 ArchLinuxCN 源&lt;/h3&gt;
&lt;p&gt;编辑 &lt;code&gt;/etc/pacman.conf&lt;/code&gt; ，在文件末尾添加&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[archlinuxcn]
Server = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;之后执行&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pacman -Syy
pacman -S archlinuxcn-keyring
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;添加用户&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;一直使用 root 用户是不太安全的！我们来添加一个新的用户&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;接下来的命令中，新的用户名以 &lt;em&gt;sihuan&lt;/em&gt; 为例，执行替换&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;useradd -m -G wheel sihuan
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;&lt;p&gt;useradd 是 archlinux 系统添加用户的命令&lt;/p&gt;
&lt;p&gt;-m 参数代表自动创建用户的家目录，这个例子里是 &lt;code&gt;/home/sihuan&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;-G 参数意味着用户要加入一些个的附加组，这儿即 &lt;code&gt;wheel&lt;/code&gt; 组&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;设置新用户密码&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;passwd sihuan
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;然后输入两次密码就好了&lt;/p&gt;
&lt;p&gt;设置 sudo&lt;/p&gt;
&lt;p&gt;首先安装 sudo&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pacman -S sudo
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;编辑配置文件，我认为你已经安装了 &lt;code&gt;vim&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;EDITOR&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;vim
visudo
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;找到下面一行，取消掉注释&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;%wheel &lt;span class="nv"&gt;ALL&lt;/span&gt;&lt;span class="o"&gt;=(&lt;/span&gt;ALL&lt;span class="o"&gt;)&lt;/span&gt; ALL
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;配置新用户的 shell&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;建议大家都自己整一个 &lt;code&gt;dotfiles&lt;/code&gt; ，具体可以看 fc 老师翻译的 &lt;a href="https://farseerfc.me/using-gnu-stow-to-manage-your-dotfiles.html"&gt;这篇文章&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;以下就以我自己的为例，如果有时间我会详细的解释以下我的 &lt;code&gt;dotfiles&lt;/code&gt; 包含了什么&lt;/p&gt;
&lt;p&gt;切换到新的用户，并来到自己的家目录&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;su sihuan
cd&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;输入密码&lt;/p&gt;
&lt;p&gt;接下来的操作就是在 &lt;em&gt;sihuan&lt;/em&gt; 这个用户里进行的啦&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 安装需要的软件包&lt;/span&gt;
sudo pacman -S git stow zsh grml-zsh-config powerline ranger exa zsh-autosuggestions zsh-syntax-highlighting zsh-history-substring-search
&lt;span class="c1"&gt;# 克隆 dotfiles 仓库&lt;/span&gt;
git clone https://github.com/Si-Huan/dotfiles
&lt;span class="c1"&gt;# 切换 shell 到 zsh&lt;/span&gt;
chsh -s /bin/zsh
&lt;span class="c1"&gt;# 删除已有的 ~/.bashrc&lt;/span&gt;
rm ~/.bashrc
&lt;span class="c1"&gt;# 使 zsh 配置生效&lt;/span&gt;
&lt;span class="nb"&gt;cd&lt;/span&gt; dotfiles
stow zsh
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这时候远程主机上的配置就完成了！再次使用 &lt;em&gt;sihuan&lt;/em&gt; 这个用户登陆，你就会得到一个很 OK 的 shell 体验。&lt;/p&gt;
&lt;h2&gt;免密登录和 SSH 主机别名&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ssh-keygen
ssh-copy-id sihuan@hostip
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Edit &lt;code&gt;~/.ssh/config&lt;/code&gt; add:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Host hostname
    HostName hostip
    User sihuan&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then you can login your host with:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ssh hostname&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And you will no longer be asked for a password.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;EOF&lt;/strong&gt;&lt;/p&gt;
</description><author>sihuan@sakuya.love (SiHuan)</author><guid isPermaLink="true">/archives/vps2arch/</guid><pubDate>Fri, 13 Mar 2020 11:06:00 +0806</pubDate></item><item><title>Linux 日常存活方案</title><link>/archives/linuxapp/</link><description>&lt;h2&gt;起因&lt;/h2&gt;
&lt;p&gt;在群聊里看到有一位同学发了一张 Windows 的桌面截图，有很多软件，大致看了一下又觉得貌似在 Linux 下也差不多都有同等或更好的替代方案，加之很多人对 Linux 的偏见认为 Linux &lt;strong&gt;生态不好&lt;/strong&gt;，于是萌发了写这篇文章的想法。&lt;/p&gt;
&lt;h2&gt;Windows 原图&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1918" data-height="1016" src="/archives/assets/7141071a443bffe05a2b043526d02ea2.jpg" alt="精髓在于妹子，所以大家换张壁纸就可以不用往下看了 (误" /&gt;&lt;figcaption&gt;精髓在于妹子，所以大家换张壁纸就可以不用往下看了 (误&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;逐个来看一下&lt;/h2&gt;
&lt;blockquote&gt;&lt;p&gt;以下完全是我自己的个人观点，我觉得好用我就说。&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;踩一捧一在任何地方都是不可取的。&lt;/strong&gt; --CS Slayer&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;h3&gt;桌面&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;不置评价&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;首先我们接触最多的就是桌面了， Windows 自带了桌面，在 Linux 下的可选方案着实比较多，我就列几个比较常见的吧：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;KDE Plasma&lt;/li&gt;
&lt;li&gt;GNOME&lt;/li&gt;
&lt;li&gt;Xfce&lt;/li&gt;
&lt;li&gt;Deepin&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;&lt;p&gt;一个更全的的列表见 &lt;a href="https://wiki.archlinux.org/index.php/Desktop_environment#List_of_desktop_environments"&gt;ArchWiki&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这个的确不大好评价，因为在 Windows 上桌面是基本没得选的，在 Linux 上选项有太多，各个之间差异比较大，而且每一个又能配出自己的花样。总的来说，Linux 上的更具有可定制性，你可以把桌面环境捏成自己想要模样。我现在使用的桌面环境是 &lt;code&gt;KDE Plasma&lt;/code&gt; 。&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1920" data-height="1080" src="/archives/assets/d6b8bbab32b505f7d81eef233d5a8cce.png" alt="我的桌面" /&gt;&lt;figcaption&gt;我的桌面&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;文件管理器&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;不置评价&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;可选项也有几个，我就只说我现在正在使用的了。&lt;/p&gt;
&lt;p&gt;我目前使用的的 &lt;code&gt;Dolphin&lt;/code&gt;，不多说上图&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="864" data-height="648" src="/archives/assets/e2b1b7758cac7a392719d6dc1ab390d7.png" alt="使用 Numix-Circle 图标的 Dolphin" /&gt;&lt;figcaption&gt;使用 Numix-Circle 图标的 Dolphin&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在这儿为了让大家体验一下 Linux 桌面环境的可定制性，我决定换一套图标和窗口风格再来一张&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="853" data-height="630" src="/archives/assets/3854c3e1ef9c135017027b11b34e68c7.png" alt="换一下图标和主题" /&gt;&lt;figcaption&gt;换一下图标和主题&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;WPS&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;相同的软件，体验基本一致&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;不得不说金山还是一个很良心的企业，兼容 MS 的办公套件并且有 Linux 版本&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1859" data-height="990" src="/archives/assets/f91357030c8e4fb60385f37920b57afa.png" alt="WPS" /&gt;&lt;figcaption&gt;WPS&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;随便打开一个表格模板&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1877" data-height="993" src="/archives/assets/6b54d9e9e97cde7b0166c6fae8f11905.png" alt="WPS 表格" /&gt;&lt;figcaption&gt;WPS 表格&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;基本和 Windows 版本一致。&lt;/p&gt;
&lt;p&gt;其他的办公套件&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;LibreOffice&lt;/li&gt;
&lt;li&gt;OpenOffice&lt;/li&gt;
&lt;li&gt;FreeOffice&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;不得不说缺少好用、兼容微软的办公套件一直是 Linux 日常使用中的一个硬伤。好在有 &lt;code&gt;WPS&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;PDF 和 Markdown 他不香吗 ╮(￣▽￣)╭&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;Typora&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;相同的软件，体验基本一致&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这个就不多说了，一样的软件&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1132" data-height="947" src="/archives/assets/565ba68921dccfb5f2c418e8975e8489.png" alt="正在编辑此文章的 Typora" /&gt;&lt;figcaption&gt;正在编辑此文章的 Typora&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;Listen1&lt;/h2&gt;
&lt;blockquote&gt;&lt;p&gt;相同的软件，体验如何俺不知道&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;然而我并没有尝试这个软件，这个软件倒是提供了 AppImage 安装包和 Debain 的安装包，以及我在 ArchLinux 的 &lt;code&gt;AUR&lt;/code&gt; 里查到了：&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;aur/listen1-desktop 2.5.1-1 (1, 0.00)
    one for all free music in china (Build from source)    
aur/listen1-desktop-appimage 2.5.1-1 (0, 0.00)
    One for all free music in China&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;个人感觉 appimage 不大清真的样子，从源代码构建的话还好些，不过听音乐我网易云就够啦&lt;/p&gt;
&lt;h3&gt;Wise Folder Hider Pro&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;不知道是啥&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;互传&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;不知道是啥&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;虽然我没有用过这个软件，但是大概从软件名字可以推断出来是一个收发文件的软件，在 Linux 下有很多优秀的解决方案，足以写一片完整的文章，这个算是平手吧。&lt;/p&gt;
&lt;h3&gt;2345 看图王&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;体验更优的同类应用&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;查看图片我现在使用的是  &lt;code&gt;Gwenview&lt;/code&gt; ，这是 KDE 应用的一员，体验良好，对于简单的图片查看，放缩旋转等操作足以胜任。我认为优于 &lt;code&gt;2345 看图王&lt;/code&gt; 。&lt;/p&gt;
&lt;h3&gt;小药丸工具箱&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;不知道是啥&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;网易云音乐&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;相同的软件，体验略差一丢丢&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1051" data-height="701" src="/archives/assets/254a720001cea6e97544c8454405438a.png" alt="网易云音乐" /&gt;&lt;figcaption&gt;网易云音乐&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;说体验差一点的原因是，在 KDE 下刚装好的网易云音乐会有不能输入中文的情况，需要改动一个文件，不过这个问题在 ArchLinux 上也许就要被修复了。&lt;/p&gt;
&lt;h3&gt;有道词典&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;不置评价&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;因为我没有使用词典软件的习惯，所以就不好评价了，但是 ArchLinux 上有有道词典的软件包，具体体验如何，我就不得而知了。&lt;/p&gt;
&lt;h3&gt;微信&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;有替代方案，但体验不佳&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;electronic-wechat&lt;/li&gt;
&lt;li&gt;wine-wechat&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;一个是网页微信的方案，一个是基于 Wine 的方案，但是总体来说不如 Windows 下用的舒服。这个 Windows 完胜。&lt;/p&gt;
&lt;p&gt;好在我不是一个重度微信用户，手机微信也没大打开过。&lt;/p&gt;
&lt;h3&gt;印象笔记&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;实力相当的替代方案&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ArchLinux 上有 Evernote 的客户端，但是我也不用 ´_&amp;gt;`&lt;/p&gt;
&lt;p&gt;当时 Evernote 有网页版吧，体验貌似也许不如客户端&lt;/p&gt;
&lt;p&gt;另外一个替代产品 &lt;code&gt;notion&lt;/code&gt; ， 网页版体验不错，不过这种笔记软件大概迁移的时候会很麻烦，好在 &lt;code&gt;notion&lt;/code&gt; 支持从 &lt;code&gt;Evernote&lt;/code&gt; 导入。&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1920" data-height="971" src="/archives/assets/72b7c459e5ed4a1f474ebebdfd8e297a.png" alt="notion" /&gt;&lt;figcaption&gt;notion&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1920" data-height="967" src="/archives/assets/5dd9e8c35a5a03be785bf5f7e5f94fdb.png" alt="notion" /&gt;&lt;figcaption&gt;notion&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;类似于 Evernote 的剪藏功能&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1920" data-height="969" src="/archives/assets/d0b76625c9fe0349479c102f8b4b6bb6.png" alt="收集网页待读" /&gt;&lt;figcaption&gt;收集网页待读&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;福欣 pdf 阅读器&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;相同的软件&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;福欣 pdf 阅读器有 Linux 版本。我曾使用过，但是我没使用过 Windows 版本，所以就不置评价了&lt;/p&gt;
&lt;p&gt;另外，我现在阅读 pdf 的方案&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Chrome  直接用浏览器查看 pdf&lt;/li&gt;
&lt;li&gt;WPS         WPS 也能看 pdf 呢&lt;/li&gt;
&lt;li&gt;Okular    KDE 应用里的 PDF 阅读器 （值得一试&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;PS&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;有替代方案，但体验不佳&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;替代方案&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GIMP&lt;/li&gt;
&lt;li&gt;inkscape&lt;/li&gt;
&lt;li&gt;wine ps&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我不懂 PS ，但是我知道 Linux 上的确不好使&lt;/p&gt;
&lt;p&gt;GIMP 倒是也不是不能用的，这个软件同时也有 Windows 版本，可以去试一下。&lt;/p&gt;
&lt;h3&gt;Pr ?&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;同 PS 吧，我不懂&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;LOL&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;基本无解&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;国服 LOL 在 Linux 下是无解的，这得益于腾讯的防作弊检测系统 (╥_╥)。&lt;/p&gt;
&lt;p&gt;在 Linux 下我玩过的游戏：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Dota2&lt;/li&gt;
&lt;li&gt;CSGO&lt;/li&gt;
&lt;li&gt;300 英雄&lt;/li&gt;
&lt;li&gt;东方Project一众&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Dota2 和 CSGO 在 Linux 上是原生运行的，基本没啥差别。&lt;/p&gt;
&lt;p&gt;300 英雄是我借助  wine 运行的，性能有点问题，风扇转的比 Windows 下猛&lt;/p&gt;
&lt;p&gt;东方的话 wine 完全没有问题，稳定 60 帧， 有没有兴趣联机绯想天呀 2333&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="659" data-height="499" src="/archives/assets/8eb554681558226101772e8c4b2b465e.png" alt="最喜欢咲夜了" /&gt;&lt;figcaption&gt;最喜欢咲夜了&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;Everything&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;有同类型软件，体验甚至更优&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;不得不说 Everything 是 Windows  平台上一款比较优秀的软件，搜索非常迅速，不过在 Linux 系统下，替代的工具有很多，比如我现在正在使用的 KDE Plasma 自带的 &lt;code&gt;KRunner&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="620" data-height="609" src="/archives/assets/d4412b28c3dd07c42188321cc6024658.png" alt="KRunner" /&gt;&lt;figcaption&gt;KRunner&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;支持的范围非常广，大概关掉一些功能就可以和 Everything 得到一样的体验了，哈哈&lt;/p&gt;
&lt;h3&gt;PotPlayer&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;有同类产品，体验较好&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;跳过了两个不认识的软件，以后不认识的我就跳过了(╥_╥)&lt;/p&gt;
&lt;p&gt;PotPlayer 是 Win 下很 nice 的视频播放器，本地视频和网络流都有支持，不过 Linux 下的也不差呀&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;MPV&lt;/li&gt;
&lt;li&gt;VLC&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;IDM&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;有同类产品，体验参差不一&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;下载工具&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;kget&lt;/li&gt;
&lt;li&gt;uget&lt;/li&gt;
&lt;li&gt;matrix&lt;/li&gt;
&lt;li&gt;aria2&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我对下载文件这方面的需求不大，一般浏览器就可以满足我的要求，关于 &lt;strong&gt;百度网盘&lt;/strong&gt; 的下载问题，我们到后边详细解释&lt;/p&gt;
&lt;h3&gt;CodeBlocks&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;相同的软件，体验一致&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;CodeBlocks 有 Linux 版本啦&lt;/p&gt;
&lt;p&gt;不过为什么不用 &lt;code&gt;VS Code&lt;/code&gt; 呢。&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;严格来说还要配合 gcc 的，毕竟 VSC 只是一个&lt;strong&gt;编辑器&lt;/strong&gt;呢&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;百度网盘&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;不置评价&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;因为百度网盘在 Windows 下的体验也极其让人恶心，我就不做比较了，在 Linux 下你可以用&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;百度网盘官方 Linux 客户端  而且&lt;strong&gt;不限速&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;BaiduPCS-go   之前的一个神器，命令行版本，&lt;strong&gt;不限速&lt;/strong&gt; ，已凉&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="991" data-height="692" src="/archives/assets/19b7111422f7e2140519ef32353b014f.png" alt="已经很对得起我的带宽了" /&gt;&lt;figcaption&gt;已经很对得起我的带宽了&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;有道云笔记&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;参考印象笔记&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;Firefox、Chrome、百分浏览器、QQ 浏览器&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;相同的软件或更优的替代软件&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;真的搞不懂为什么 win 平台上会有这么多浏览器&lt;/p&gt;
&lt;h3&gt;Kindle&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;没需求，不知道&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;哔哩哔哩直播姬&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;有替代方案，体验还可以吧&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在 Linux 下可以使用 OBS 推流，不过就看不到观众的弹幕了。只好再打开一个网页看自己直播 (&lt;/p&gt;
&lt;p&gt;这是我目前使用的方法&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1917" data-height="1075" src="/archives/assets/30619ce31e337e5b88cac2c213ef09e8.png" alt="OBS 直播" /&gt;&lt;figcaption&gt;OBS 直播&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;XMain ZEN&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;相同的软件、体验差不多的同类软件&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Linux 下有 XMain ZEN ，但是这是一个收费软件，现有以下免费的方案&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;desktop-naotu&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;桌面版脑图 (百度脑图离线版，思维导图) 跨平台支持 Windows/Linux/Mac OS. (A 
   cross-platform multilingual Mind Map Tool)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;freemind&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;QQ&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;基本同微信，Windows 完胜&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Linux 下的替代方案：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;QQ for Linux&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;腾讯的官方产品，能用的程度&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Deepin Wine QQ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Deepin Wine Tim&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Deepin 团队制作的 Wine 版本，体验还是比较好的，但是有一些小 Bug，这是我之前使用的方案&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;因为在 Linux 下使用 QQ 的需求也不是特别大，目前使用 &lt;code&gt;QQ for Linux&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1118" data-height="798" src="/archives/assets/913ea49ec599b7bfac3c4b1bb6009bc7.png" alt="QQ for Linux" /&gt;&lt;figcaption&gt;QQ for Linux&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Telegram 他不香嘛？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1111" data-height="934" src="/archives/assets/7478a54cf17ecd9c591061239bd94ff2.png" alt="Telegram" /&gt;&lt;figcaption&gt;Telegram&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3&gt;钉钉、腾讯课堂&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;Windows 完胜&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Wine 钉钉方案，能用的程度&lt;/p&gt;
&lt;p&gt;这些国产软件太草了哦，没的办法，这种也没办法找替代品呀， wine 方案其实也还好，但是它没有原生清真啊&lt;/p&gt;
&lt;h3&gt;电脑管家&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;无论 Linux 还是我都不再需要一个&lt;strong&gt;电脑管家&lt;/strong&gt;来管理系统&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;腾讯网游加速器&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;此处仅有一个滑稽&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;Sublime&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;同样的软件，一致的体验&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这个就没有啥好说的了哎&lt;/p&gt;
&lt;p&gt;Sublime 有 Linux 版本，而且 Linux 下也有一众很优秀的编辑器&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;圣战双方 vim &amp;amp; emacs&lt;/li&gt;
&lt;li&gt;VS Code&lt;/li&gt;
&lt;li&gt;Kate&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我现在使用的是 &lt;code&gt;VS Code&lt;/code&gt; 和 &lt;code&gt;vim&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;等等，我是不是落下了什么东西？&lt;/h2&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="95" data-height="91" src="/archives/assets/3fa629037f8ea30a11caa494455d80a9.png" alt="这货" /&gt;&lt;figcaption&gt;这货&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;没错我是故意把它拉出来的，我就是要羞辱它&lt;/p&gt;
&lt;p&gt;我 &lt;code&gt;pacman&lt;/code&gt; 把它按地上锤&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sihuan ~ $ pacman -help     
用法:  pacman &amp;lt;操作&amp;gt; [...]
操作:
    pacman {-h --help}
    pacman {-V --version}
    pacman {-D --database} &amp;lt;选项&amp;gt; &amp;lt;软件包&amp;gt;
    pacman {-F --files}    [选项] [软件包]
    pacman {-Q --query}    [选项] [软件包]
    pacman {-R --remove}   [选项] &amp;lt;软件包&amp;gt;
    pacman {-S --sync}     [选项] [软件包]
    pacman {-T --deptest}  [选项] [软件包]
    pacman {-U --upgrade}  [选项] &amp;lt;文件&amp;gt;

使用 'pacman {-h --help}' 及某个操作以查看可用选项&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这个优点是值得长篇大论的，&lt;strong&gt;&lt;em&gt;这儿写不下&lt;/em&gt;&lt;/strong&gt; ლ(╹◡╹ლ)&lt;/p&gt;
</description><author>sihuan@sakuya.love (SiHuan)</author><guid isPermaLink="true">/archives/linuxapp/</guid><pubDate>Sun, 15 Mar 2020 11:06:00 +0806</pubDate></item><item><title>ArchLinux 下双显卡配置</title><link>/archives/linuxgpu/</link><description>&lt;h2&gt;Fuck Nvidia&lt;/h2&gt;
&lt;p&gt;如果笔电上有一张 Nivdia 显卡，使用 Linux 的时候也许会因为驱动引起一些令人苦恼的问题。&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;如果熟读并背诵 ArchWiki 的话就不会有这些问题了  (误&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;我就记录一下我的笔电在 ArchLinux 下的双显卡的配置，其实我说的这些，几乎全部来自于 ArchWiki ，但是分布在不同的几个页面，我就充当一次搬运工了。&lt;/p&gt;
&lt;p&gt;我的显卡硬件情况：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GPU0 Intel UHD 620&lt;/li&gt;
&lt;li&gt;GPU1 Nvidia MX150&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;先说一下黑屏的问题&lt;/h3&gt;
&lt;p&gt;有可能是因为你漏装了 nvidia 显卡的驱动程式，可以用一下命令安装&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;进不去系统的话可以尝试 &lt;code&gt;Ctrl&lt;/code&gt;+&lt;code&gt;Alt&lt;/code&gt;+&lt;code&gt;F2~6&lt;/code&gt;切换到 &lt;code&gt;tty&lt;/code&gt;，仍然不行的话可能就要搬来 LiveCD 了&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pacman -S nvidia
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;注意！&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;我现在执行的命令在我的机器上有效，对于比较新的机器应该都没有问题，但是具体呢还是要参看 &lt;a href="https://wiki.archlinux.org/index.php/NVIDIA#Installation"&gt;ArchWiki NVIDIA&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;进入正题&lt;/h2&gt;
&lt;p&gt;先说一下我的基于什么选择了接下来的双显卡方案，如果你的目的与我不同，那也许就没有参考价值了&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;尽量发挥性能&lt;/li&gt;
&lt;li&gt;尽量省电&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;基于以上理由我选择了，&lt;strong&gt;闭源驱动&lt;/strong&gt; + &lt;strong&gt;PRIME render offload&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;安装驱动&lt;/h3&gt;
&lt;h4&gt;Intel 显卡驱动&lt;/h4&gt;
&lt;blockquote&gt;&lt;p&gt;具体参见 &lt;a href="https://wiki.archlinux.org/index.php/Intel_graphics"&gt;ArchWiki Intel graphics&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;安装 &lt;code&gt;mesa&lt;/code&gt; 包，为了对 32 位程序的支持，安装 &lt;code&gt;lib32-mesa&lt;/code&gt; 包 (位于 &lt;strong&gt;multilib&lt;/strong&gt; 仓库，请提前自行开启此仓库)。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pacman -S mesa lib32-mesa
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;另外需要注意的是，如果之前安装了 &lt;code&gt;xf86-video-intel&lt;/code&gt; 包，最好卸载掉&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;比如这个包会引起我的 OBS 在录制闪屏，而且不使用此包也是官方的建议&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Often not recommended, see note below&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Some (&lt;a href="http://www.phoronix.com/scan.php?page=news_item&amp;amp;px=Ubuntu-Debian-Abandon-Intel-DDX"&gt;Debian &amp;amp; Ubuntu&lt;/a&gt;, &lt;a href="http://www.phoronix.com/scan.php?page=news_item&amp;amp;px=Fedora-Xorg-Intel-DDX-Switch"&gt;Fedora&lt;/a&gt;, &lt;a href="https://community.kde.org/Plasma/5.9_Errata#Intel_GPUs"&gt;KDE&lt;/a&gt;) recommend not installing the &lt;a href="https://www.archlinux.org/packages/?name=xf86-video-intel"&gt;xf86-video-intel&lt;/a&gt; driver, and instead falling back on the modesetting driver for Gen4 and newer GPUs (GMA 3000 from 2006 and newer). See &lt;a href="https://web.archive.org/web/20160714232204/https://www.reddit.com/r/archlinux/comments/4cojj9/it_is_probably_time_to_ditch_xf86videointel/"&gt;[1]&lt;/a&gt;, &lt;a href="http://www.phoronix.com/scan.php?page=article&amp;amp;item=intel-modesetting-2017&amp;amp;num=1"&gt;[2]&lt;/a&gt;, &lt;a href="https://wiki.archlinux.org/index.php/Xorg#Installation"&gt;Xorg#Installation&lt;/a&gt;, and &lt;a href="https://jlk.fjfi.cvut.cz/arch/manpages/man/modesetting.4"&gt;modesetting(4)&lt;/a&gt;. However, the modesetting driver can cause problems such as &lt;a href="https://bugs.chromium.org/p/chromium/issues/detail?id=370022"&gt;Chromium Issue 370022&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;卸载&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pacman -Rsc xf86-video-intel
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;NVIDIA 显卡驱动&lt;/h4&gt;
&lt;blockquote&gt;&lt;p&gt;具体参见 &lt;a href="https://wiki.archlinux.org/index.php/NVIDIA#Installation"&gt;ArchWiki NVIDIA&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;安装 &lt;code&gt;nvidia&lt;/code&gt; 包，为了对 32 位程序的支持，安装 &lt;code&gt;lib32-nvidia-utils&lt;/code&gt; 包 (位于 &lt;strong&gt;multilib&lt;/strong&gt; 仓库，请提前自行开启此仓库)。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pacman -S nvidia lib32-nvidia-utils
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;配置 PRIME render offload&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;具体参见 &lt;a href="https://wiki.archlinux.org/index.php/PRIME#PRIME_render_offload"&gt;ArchWiki PRIME&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;安装 &lt;code&gt;nvidia-prime&lt;/code&gt; 包来使用官方配置 (不起作用的话，你就要去 Wiki 看怎么手动配置了，不过我觉得一般都不需要手动配置啦)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pacman -S nvidia-prime
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;reboot！&lt;/h3&gt;
&lt;p&gt;这时候重启系统就应该起作用了，你可以通过 &lt;code&gt;prime-run&lt;/code&gt; 命令使指定程序在 NVIDIA 显卡上渲染。例如：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 以 n 卡渲染 vlc&lt;/span&gt;
prime-run vlc
&lt;span class="c1"&gt;# 以 n 卡渲染 wine 游戏&lt;/span&gt;
prime-run wine touhou08.exe
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;在此之前你可能想查看你的配置是否生效，可以使用 &lt;code&gt;glxinfo&lt;/code&gt; 这个工具，它属于 &lt;code&gt;mesa-demos&lt;/code&gt; 包，先安装&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pacman -S mesa-demo
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;来测试一下&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;glxinfo &lt;span class="p"&gt;|&lt;/span&gt; grep &lt;span class="s2"&gt;&amp;quot;OpenGL renderer&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;输出应该类似于下面，这意味着默认情况下你使用的是 Intel 显卡&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;OpenGL renderer string: Mesa DRI Intel(R) UHD Graphics (Whiskey Lake 3x8 GT2)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然后&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;prime-run glxinfo &lt;span class="p"&gt;|&lt;/span&gt; grep &lt;span class="s2"&gt;&amp;quot;OpenGL renderer&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;你应该看到&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;OpenGL renderer string: GeForce MX150/PCIe/SSE2&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;这意味着你在使用 NVIDIA 显卡了 ´ ▽ ` )ﾉ&lt;/p&gt;
&lt;h2&gt;一点总结&lt;/h2&gt;
&lt;p&gt;我之前使用的是 &lt;a href="https://wiki.archlinux.org/index.php/Bumblebee"&gt;Bumblebee&lt;/a&gt; 方案，但是感觉不如现在的方案方便也不如这个性能好。&lt;/p&gt;
&lt;p&gt;另外使用了 NVIDIA 的闭源驱动所以在配置双显卡的时候使用了 &lt;strong&gt;PRIME render offload&lt;/strong&gt; 而不是在 Wiki 里的上一级标题 &lt;strong&gt;PRIME GPU offloading&lt;/strong&gt; ，后者是给 NVIDIA 的开源驱动程式用的。关于具体的不同，自己去翻阅 wiki 吧，不归我管，我只是记录一下我觉得目前最好使的方案。&lt;/p&gt;
</description><author>sihuan@sakuya.love (SiHuan)</author><guid isPermaLink="true">/archives/linuxgpu/</guid><pubDate>Tue, 17 Mar 2020 11:06:00 +0806</pubDate></item><item><title>Shitama 代码分析「概况」</title><link>/archives/shitama1/</link><description>&lt;blockquote&gt;&lt;p&gt;别看了全是胡扯，我之前理解错有问题，没认真读代码&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;Shitama 的历史&lt;/h1&gt;
&lt;blockquote&gt;&lt;p&gt;「Shitama」是一个类毛玉服务，可以为「东方非想天则」提供简单的端口转发功能，让身处内网的玩家能够建立主机并进行对战。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;根据 Shitama 的 commit 的记录原作者应该是 &lt;a href="https://github.com/evshiron"&gt;evshiron&lt;/a&gt; ，不过现在 evshiron 的 github 上已经找不到 shitama 的相关源码，可以找到的是 &lt;a href="https://github.com/u-u-z/shitama"&gt;Remi_IO 的一份 fork&lt;/a&gt;，现在 &lt;a href="https://github.com/Si-Huan/shitama"&gt;Si-Huan/shitama&lt;/a&gt; 便是 fork 自 Remi_IO 的 fork .&lt;/p&gt;
&lt;h1&gt;非想天则联机机制与 Shitama 实现的功能&lt;/h1&gt;
&lt;p&gt;接下来，因为懒，我会将 Shitama 写为 shitama.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;在此约定: 下文中 &lt;u&gt;主机方&lt;/u&gt; 根据不同语境，指 &lt;u&gt;在联机对战中建立主机的那个人&lt;/u&gt;、&lt;u&gt;在联机对战中建立主机的那个游戏客户端&lt;/u&gt; 或者 &lt;u&gt;在联机对战中建立主机一方的电脑&lt;/u&gt;。&lt;u&gt;客机方&lt;/u&gt; 指什么大家自己类推一下吧（&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;先简略说一下非想天则的联机机制，主机方指定本地端口建立房间，客机方输入主机方 ip:port  进行连接。&lt;/p&gt;
&lt;p&gt;那么现在的问题是：&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;如今，网络地址转换（Network Address Translation，NAT）设备如光猫、路由器等日益普及，许多联网设备失去了被从公网访问的能力。尽管某些情况下可以通过调整配置解决，例如对所有途径的NAT设备进行端口映射如配置虚拟服务器、DMZ主机，在多数情况下人们并没有调整配置的权限，如小区宽带，运营商NAT，网吧路由器，甚至拿不到超级帐号的光猫等等。&lt;a href="https://github.com/Si-Huan/shitama/blob/master/docs/zh_CN/Watching.md"&gt;Watching.md&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;shitama 实现的功能是：&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;类毛玉正是为了解决这个问题而出现的。有别于虚拟局域网如Hamachi、QQ对战平台、浩方对战平台、游侠对战平台，类毛玉通过将非想天则主机的端口转发到公网服务器上，使其它用户可以通过公网服务器的端口连接到处于内网的主机，从而进行对战。&lt;a href="https://github.com/Si-Huan/shitama/blob/master/docs/zh_CN/Watching.md"&gt;Watching.md&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;shitama 构成与一次联机的工作过程图示&lt;/h1&gt;
&lt;p&gt;shitama 的分为四部分:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;clinet&lt;/li&gt;
&lt;li&gt;holder&lt;/li&gt;
&lt;li&gt;shard&lt;/li&gt;
&lt;li&gt;client-ui-qt&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其中第四部分是 client 的一个壳，与 client 本体通过 http 通信。使用 Qt/C++ 编写，其余部分使用 go 编写，因为本菜鸡全然不了解 Qt/C++ ，故 client-ui-qt 不在本文讨论范围。&lt;/p&gt;
&lt;p&gt;在此呢，我先放几张图，大致展示一下在 shitama 帮助下一次联机的过程&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;client 向 holder 发起中转请求，请求中指定了 shardAddr 与 transport，即 shard 地址和使用的传输协议（目前只有 UDP 可选）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;holder 收到请求后向被指定的 shard 发起中转请求&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="912" data-height="660" src="/archives/assets/425f820ca9895723772d477ebc81545b.png" alt="申请中转" /&gt;&lt;figcaption&gt;申请中转&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;shard 收到请求后会准备两个端口，此处几位 HostPort 和 GuestPort。并向 holder 返回这两个端口号&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;holder 收到 shard 发来的端口后向 client 返回这两个端口号&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="912" data-height="660" src="/archives/assets/81d12fb47f947784978b8c710bb7951e.png" alt="shard 返回端口号" /&gt;&lt;figcaption&gt;shard 返回端口号&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;client 得知 shard 已经准备好两个端口后，会建立和 shard:HostPort 的链接，并把 shard:GuestPort 展示给使用者，这时候 client 的使用者就可以通过 im 把 shard:GuestPort 发送给客机方。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;客机方在游戏客户端填入 shard:GuestPort 进行联机对战&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1195" data-height="660" src="/archives/assets/c8b91a3391ee5b4f04d4eac1e7ef7ff4.png" alt="链接建立" /&gt;&lt;figcaption&gt;链接建立&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;不难发现其中相对复杂的部分是 shard HostPort 与 GuestPort 之间发生了什么，以及主机方游戏客户端（一般来说为主机方的 10800 端口）与 client 发生了什么。&lt;/p&gt;
&lt;p&gt;其实简略来说的话就是，shard GuestPort  和 客机方建立通信，HostPort 和 client 的某个端口（记作 Port1）通信，clinet 的另一个端口（记作 Port2）和主机方游戏客户端通信，主机方客户端发送数据给 Port2， Port2 收到数据会使用 Port1 发出去，也就是发给 HostPort，HostPort 收到数据会通过 GuestPort 发出去也就是发给客机方游戏客户端。因为涉及到观战的问题，主机方 client 的实际情况&lt;del&gt;要比我说的复杂一些&lt;/del&gt;远比我说的复杂。&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1346" data-height="372" src="/archives/assets/a45ce6fb1094844897e18bd373f45524.png" alt="how_shitama_work4" /&gt;&lt;figcaption&gt;how_shitama_work4&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;图中虚线的意味： shard1 中由 HostPort 指向 GuestPort 的虚线意味着 HostPort 并不会向 GuestPort 发送数据，而是每当 HostPort 收到来自 Port1 的数据就会使用 GuestPort 发送出去。也就是说 HostPort 只与 Port1 通信。&lt;/p&gt;
&lt;p&gt;接下来的几篇博文会比较&lt;del&gt;正经&lt;/del&gt;的分析 shitama 的代码。&lt;/p&gt;
</description><author>sihuan@sakuya.love (SiHuan)</author><guid isPermaLink="true">/archives/shitama1/</guid><pubDate>Mon, 01 Jun 2020 11:06:00 +0806</pubDate></item><item><title>Shitama 代码分析「holder 启动」</title><link>/archives/shitama2/</link><description>&lt;blockquote&gt;&lt;p&gt;别看了，全是胡扯，我之前没认真读代码&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;这是开头&lt;/h1&gt;
&lt;p&gt;因为按逻辑上，shitama 的运行顺序应该是 「holder 启动」、「shard 启动」、「client 启动」和 「链接建立」。我也就先按照这个来分析。&lt;/p&gt;
&lt;h1&gt;结构&lt;/h1&gt;
&lt;h2&gt;目录结构&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;holder
├── lib
│   ├── clientInfo.go
│   ├── holder.go
│   ├── server.go
│   ├── shardInfo.go
│   └── tunnel.go
└── main.go&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;结构体结构&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;./lib/holder.go&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;type&lt;/span&gt; &lt;span class="nx"&gt;Holder&lt;/span&gt; &lt;span class="kd"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;logger&lt;/span&gt;  &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;logrus&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Logger&lt;/span&gt;
    &lt;span class="nx"&gt;Tunnel&lt;/span&gt;  &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;Tunnel&lt;/span&gt;
    &lt;span class="nx"&gt;Server&lt;/span&gt;  &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;Server&lt;/span&gt;
    &lt;span class="nx"&gt;shards&lt;/span&gt;  &lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="nx"&gt;ShardInfo&lt;/span&gt;
    &lt;span class="nx"&gt;clients&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="nx"&gt;ClientInfo&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;./lib/tunnel.go&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;type&lt;/span&gt; &lt;span class="nx"&gt;Tunnel&lt;/span&gt; &lt;span class="kd"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;OnConnected&lt;/span&gt;        &lt;span class="nx"&gt;EventBus&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Bus&lt;/span&gt;
    &lt;span class="nx"&gt;OnDisconnected&lt;/span&gt;     &lt;span class="nx"&gt;EventBus&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Bus&lt;/span&gt;
    &lt;span class="nx"&gt;OnRequestReceived&lt;/span&gt;  &lt;span class="nx"&gt;EventBus&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Bus&lt;/span&gt;
    &lt;span class="nx"&gt;OnPublishReceived&lt;/span&gt;  &lt;span class="nx"&gt;EventBus&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Bus&lt;/span&gt;
    &lt;span class="nx"&gt;OnPeerConnected&lt;/span&gt;    &lt;span class="nx"&gt;EventBus&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Bus&lt;/span&gt;
    &lt;span class="nx"&gt;OnPeerDisconnected&lt;/span&gt; &lt;span class="nx"&gt;EventBus&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Bus&lt;/span&gt;
    &lt;span class="nx"&gt;parent&lt;/span&gt;             &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;Holder&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;./lib/server.go&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;type&lt;/span&gt; &lt;span class="nx"&gt;Server&lt;/span&gt; &lt;span class="kd"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;parent&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;Holder&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;./lib/shardInfo.go&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;type&lt;/span&gt; &lt;span class="nx"&gt;ShardInfo&lt;/span&gt; &lt;span class="kd"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;common&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;ShardInfo&lt;/span&gt;
    &lt;span class="nx"&gt;conn&lt;/span&gt;    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;kcp&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;UDPSession&lt;/span&gt;
    &lt;span class="nx"&gt;session&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;yamux&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Session&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;../common/shardInfo.go&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;type&lt;/span&gt; &lt;span class="nx"&gt;ShardInfo&lt;/span&gt; &lt;span class="kd"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;Addr&lt;/span&gt;     &lt;span class="kt"&gt;string&lt;/span&gt; &lt;span class="s"&gt;`json:&amp;quot;addr&amp;quot;`&lt;/span&gt;
    &lt;span class="nx"&gt;IP&lt;/span&gt;       &lt;span class="kt"&gt;string&lt;/span&gt; &lt;span class="s"&gt;`json:&amp;quot;ip&amp;quot;`&lt;/span&gt;
    &lt;span class="nx"&gt;EchoPort&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt;    &lt;span class="s"&gt;`json:&amp;quot;echoPort&amp;quot;`&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;./lib/clientInfo.go&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;type&lt;/span&gt; &lt;span class="nx"&gt;ClientInfo&lt;/span&gt; &lt;span class="kd"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;common&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;ClientInfo&lt;/span&gt;
    &lt;span class="nx"&gt;conn&lt;/span&gt;    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;kcp&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;UDPSession&lt;/span&gt;
    &lt;span class="nx"&gt;session&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;yamux&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Session&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;../common/clientInfo.go&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;type&lt;/span&gt; &lt;span class="nx"&gt;ClientInfo&lt;/span&gt; &lt;span class="kd"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nx"&gt;Addr&lt;/span&gt; &lt;span class="kt"&gt;string&lt;/span&gt; &lt;span class="s"&gt;`json:&amp;quot;addr&amp;quot;`&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h1&gt;holder 启动时函数调用顺序&lt;/h1&gt;

&lt;pre&gt;&lt;code&gt;
&lt;/code&gt;&lt;/pre&gt;
</description><author>sihuan@sakuya.love (SiHuan)</author><guid isPermaLink="true">/archives/shitama2/</guid><pubDate>Sun, 07 Jun 2020 11:06:00 +0806</pubDate></item><item><title>Utsutsu 用法</title><link>/archives/utsutsu1/</link><description>&lt;h1&gt;夢と現&lt;/h1&gt;
&lt;blockquote&gt;&lt;p&gt;一个打则工具，与 shitama 原理上略有不同，也许会对某些网络有奇效。&lt;/p&gt;
&lt;p&gt;现在还是仅仅能用的阶段，没有图形界面，只有一个服务器可以选择（也就是，没得选）&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;用法&lt;/h2&gt;
&lt;h3&gt;建立主机&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;打开 utsutsu ，输入 &lt;code&gt;c&lt;/code&gt; 并回车，根据提示输入昵称之后回车，然后就不用管了 utsutsu 了&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1060" data-height="171" src="/archives/assets/3199f8ecc4987704d5a1c9125d7804e7.png" alt="主机 utsutus" /&gt;&lt;figcaption&gt;主机 utsutus&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;打开非想天则，选择网络对战，使用默认端口 &lt;code&gt;10800&lt;/code&gt; 建立主机&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="647" data-height="517" src="/archives/assets/87bbb9b5946912fc9a614fa763c22ac8.png" alt="主机 则" /&gt;&lt;figcaption&gt;主机 则&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;等待连入就 OK 啦&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;客机连入&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;和 shitama 不同的地方是，客机也需要使用 utsutsu 才行（&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;打开 utsutsu ，输入 &lt;code&gt;x&lt;/code&gt; 并回车，输入想连接的对手的序号之后回车&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1042" data-height="252" src="/archives/assets/93a9b7c10ea09f4d9669739dc84c2747.png" alt="客机 utsutsu" /&gt;&lt;figcaption&gt;客机 utsutsu&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;不用在意为啥会有两个 sakuya （ 这个问题有待处理，所以大家在建主的时候要用自己特色的名字&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;打开非想天则，选择网络对战，连接 &lt;code&gt;127.0.0.1：31106&lt;/code&gt; 这个 IP 地址进行对战（这个地址是不会变化）&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="638" data-height="513" src="/archives/assets/9e7de25d0b2b543f794afbcb90575392.png" alt="客机 则" /&gt;&lt;figcaption&gt;客机 则&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;最后&lt;/h2&gt;
&lt;p&gt;这个东西现在问题很多，但是如果按照上述操作至少是可以用的。&lt;/p&gt;
&lt;p&gt;已知问题&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;建立主机的人退出 utsutsu 之后，需要一段时间才不会在客机的列表里出现&lt;/li&gt;
&lt;li&gt;按 p 无法退出，这个在做了&lt;/li&gt;
&lt;li&gt;等等等 不想写了 太多&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;遇到问题之后现在较好的解决方案是重启 utsutsu （&lt;/p&gt;
</description><author>sihuan@sakuya.love (SiHuan)</author><guid isPermaLink="true">/archives/utsutsu1/</guid><pubDate>Fri, 24 Jul 2020 11:06:00 +0806</pubDate></item><item><title>部署一个自己的人工智障机器人</title><link>/archives/xzz/</link><description>&lt;blockquote&gt;&lt;p&gt;2020/08/02 由于一些原因，将我的 QQ 机器人从 &lt;em&gt;酷Q&lt;/em&gt; 迁移到 开源的 &lt;em&gt;MiraiGo&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;顺便写下了此文档&lt;/p&gt;
&lt;p&gt;此文用到的项目&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Mrs4s/MiraiGo"&gt;MiraiGo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Mrs4s/go-cqhttp"&gt;go-cqhttp&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Si-Huan/XZZ"&gt;XZZ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2&gt;准备工作&lt;/h2&gt;
&lt;h3&gt;安装 Python 环境并克隆 XZZ&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;因为机器人的逻辑部分，也就西 XZZ 是 Python 写的，所以需要 Python 环境&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在 ArchLinux 中，安装 python&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo pacman -S python
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;克隆 XZZ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git clone https://github.com/Si-Huan/XZZ.git
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;编译或下载 go-cqhttp&lt;/h3&gt;
&lt;h4&gt;编译&lt;/h4&gt;
&lt;p&gt;克隆仓库&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git clone https://github.com/Mrs4s/go-cqhttp.git
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;编译&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; go-cqhttp &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; go build
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;&lt;p&gt;tips: 自备 go 环境&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4&gt;下载&lt;/h4&gt;
&lt;p&gt;前往 &lt;a href="https://github.com/Mrs4s/go-cqhttp/releases"&gt;Releases 页面&lt;/a&gt; 下载自己系统对应的版本&lt;/p&gt;
&lt;h3&gt;安装并启动 Redis 数据库 （可选）&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;可选但推荐，不然可能有一些服务无法使用&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在 ArchLinux 下&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo pacman -S redis
sudo systemctl &lt;span class="nb"&gt;enable&lt;/span&gt; redis.service --now
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;&lt;p&gt;tips: 请保持 redis 服务运行在 XZZ 同服务器 6379 端口&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;开始配置&lt;/h2&gt;
&lt;p&gt;我们假设你现在的目录结果如下&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;.
├── bot
│   └── go-cqhttp
└── xzz
    ├── exmple.json
    ├── main.py
    ├── README.md
    ├── req.txt
    ├── route.py
    ├── sample_config.py
    ├── test.py
    ├── worker
    └── zzcore.py&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;其中 &lt;code&gt;xzz&lt;/code&gt; 文件夹下是你第一步克隆的 XZZ&lt;/p&gt;
&lt;p&gt;其中 &lt;code&gt;bot&lt;/code&gt; 文件夹下的 &lt;code&gt;go-cqhttp&lt;/code&gt; 是你在第一步下载或编译的 go-cqhttp 的可执行文件&lt;/p&gt;
&lt;h3&gt;初始化并配置 go-cqhttp&lt;/h3&gt;
&lt;p&gt;移步至 &lt;code&gt;bot&lt;/code&gt; 文件夹下启动 &lt;code&gt;go-cqhttp&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;你会看到以下信息，程序会自动退出&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[2020-08-02 22:25:17] [WARNING]: 尝试加载配置文件 config.json 失败: 文件不存在 
[2020-08-02 22:25:17] [INFO]: 默认配置文件已生成, 请编辑 config.json 后重启程序.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;现在你的目录结果大概是这样&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;.
├── bot
│   ├── config.json
│   ├── data
│   ├── go-cqhttp
│   └── logs
└── xzz
    ├── exmple.json
    ├── main.py
    ├── README.md
    ├── req.txt
    ├── route.py
    ├── sample_config.py
    ├── test.py
    ├── worker
    └── zzcore.py&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;我们去编辑 &lt;code&gt;./bot/config.json&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;uin&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1010101010&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;password&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;mima&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;enable_db&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;access_token&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;token&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;relogin&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;relogin_delay&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;http_config&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;quot;enabled&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;quot;host&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;127.0.0.1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;quot;port&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;5700&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;quot;post_urls&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;127.0.0.1:5580&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;XZZ&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;ws_config&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;quot;enabled&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;quot;host&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;0.0.0.0&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;quot;port&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;6700&lt;/span&gt;
    &lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;ws_reverse_servers&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[{&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;quot;enabled&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;quot;reverse_url&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;ws://you_websocket_universal.server&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;quot;reverse_api_url&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;ws://you_websocket_api.server&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;quot;reverse_event_url&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;ws://you_websocket_event.server&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;quot;reverse_reconnect_interval&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3000&lt;/span&gt;
    &lt;span class="p"&gt;}],&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;quot;debug&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;需要编辑的字段如下&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;&lt;tr&gt;
&lt;th style="text-align:left"&gt;字段&lt;/th&gt;
&lt;th&gt;类型&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align:left"&gt;uin&lt;/td&gt;
&lt;td&gt;int64&lt;/td&gt;
&lt;td&gt;登录用 QQ 号&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left"&gt;password&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;登录用密码&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left"&gt;access_token&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;用于与 XZZ 交互是身份认证&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left"&gt;http_config&lt;/td&gt;
&lt;td&gt;object&lt;/td&gt;
&lt;td&gt;HTTP API 配置，可与上面我给出的配置一致&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left"&gt;ws_config.enable&lt;/td&gt;
&lt;td&gt;bool&lt;/td&gt;
&lt;td&gt;XZZ 不需要用到 ws， 请设置为 false&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left"&gt;ws_reverse_servers.enable&lt;/td&gt;
&lt;td&gt;bool&lt;/td&gt;
&lt;td&gt;同上，设置为 false&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;一会配置 XZZ 需要用到的字段有 &lt;code&gt;access_token&lt;/code&gt; 、 &lt;code&gt;http_config.host&lt;/code&gt; 、 &lt;code&gt;http_config.port&lt;/code&gt; 、 &lt;code&gt;http_config.post_urls&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;如果 &lt;code&gt;go-cqhttp&lt;/code&gt; 与 &lt;code&gt;XZZ&lt;/code&gt; 没有运行在同一台服务器上请将 &lt;code&gt;http_config.host&lt;/code&gt; 设置为 &lt;code&gt;0.0.0.0&lt;/code&gt; ，&lt;code&gt;http_config.post_urls&lt;/code&gt; 设置为 &lt;code&gt;XZZ&lt;/code&gt; 运行时监听的端口&lt;/p&gt;
&lt;p&gt;配置完成之后我们就可以启动 &lt;code&gt;go-cqhttp&lt;/code&gt; 了，启动的时候第一次登陆 QQ 可能需要验证码，按字符画输入即可，之后将 &lt;code&gt;go-cqhttp&lt;/code&gt; 切到后台，进行下一步。&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;可以使用如 &lt;strong&gt;screen&lt;/strong&gt; 这种工具将 &lt;code&gt;go-cqhttp&lt;/code&gt; 挂在后台&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;配置 XZZ&lt;/h3&gt;
&lt;p&gt;移步至 &lt;code&gt;xzz&lt;/code&gt; 文件夹下&lt;/p&gt;
&lt;p&gt;创建虚拟环境&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;python -m venv env
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;激活虚拟环境&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;source&lt;/span&gt; ./env/bin/activate
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;安装依赖&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pip install -r req.txt
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;配置 XZZ&lt;/p&gt;
&lt;p&gt;复制一份 &lt;code&gt;sample_config.py&lt;/code&gt; 到 &lt;code&gt;config.py&lt;/code&gt;，并编辑&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ALLWORKERS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bbc&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bc&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bing&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;echo&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;mc&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;music&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;ping&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;shi&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;wolfram&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yiyan&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;help&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;APIURL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://127.0.0.1:5700/&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;AUTHORIZATION&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;token&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;PORT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;5580&lt;/span&gt;

&lt;span class="n"&gt;BINGKEY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;WOLFRAMALPHAAPPID&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;LOLIKEY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;以上必须要配置的有&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;APIURL&lt;/code&gt; 为上文 &lt;strong&gt;go-cqhttp&lt;/strong&gt; HTTP API 所在的地址，与上文  &lt;code&gt;http_config.host&lt;/code&gt; 、 &lt;code&gt;http_config.port&lt;/code&gt; 有关，如果上面这两个和我设置的一样，那么这儿为 &lt;code&gt;127.0.0.1:5700&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;AUTHORIZATION&lt;/code&gt; 与上文 &lt;code&gt;access_token&lt;/code&gt; 相同，这儿为 &lt;code&gt;token&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;PORT&lt;/code&gt; &lt;strong&gt;XZZ&lt;/strong&gt; 要监听的端口，这儿设置为 &lt;code&gt;5580&lt;/code&gt; ，请保证上文 &lt;code&gt;http_config.post_urls&lt;/code&gt; 中的端口与此一致，以便 &lt;strong&gt;go-cqhttp&lt;/strong&gt; 可以访问到 &lt;strong&gt;XZZ&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其余参数可选&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;ALLWORKERS&lt;/code&gt; 使用 &lt;code&gt;/help&lt;/code&gt; 命令时所列出的项目&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;BINGKEY&lt;/code&gt; 如需要使用 &lt;code&gt;/bing&lt;/code&gt; 命令必须添加，申请地址 （以后加）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;WOLFRAMALPHAAPPID&lt;/code&gt;  如需要使用 &lt;code&gt;/wolfram&lt;/code&gt; 命令必须添加，申请地址 （以后加）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;LOLIKEY&lt;/code&gt; 如需要使用 &lt;code&gt;/pixiv&lt;/code&gt; 命令必须添加，申请地址 （以后加）&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;配置完毕之后，启动 XZZ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;python main.py
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;和上文 对 go-cqhttp 的处理一样，挂在后台就好了&lt;/p&gt;
&lt;h3&gt;测试！&lt;/h3&gt;
&lt;p&gt;在群聊发生 &lt;code&gt;/ping&lt;/code&gt; ，bot 是不是回复了 &lt;code&gt;Pong&lt;/code&gt; 呢？&lt;/p&gt;
&lt;h2&gt;另外&lt;/h2&gt;
&lt;p&gt;XZZ 功能的开发超级方便，如果有兴趣的话，欢迎来给 XZZ 添加功能 ~&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/Si-Huan/XZZ"&gt;https://github.com/Si-Huan/XZZ&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;啊这 终于写完了， 又水了一篇 23333&lt;/p&gt;
&lt;/blockquote&gt;
</description><author>sihuan@sakuya.love (SiHuan)</author><guid isPermaLink="true">/archives/xzz/</guid><pubDate>Sun, 02 Aug 2020 11:06:00 +0806</pubDate></item><item><title>今天收获了两个网盘诶</title><link>/archives/two-drive/</link><description>&lt;h1&gt;今天又干了不少事情呢&lt;/h1&gt;
&lt;p&gt;欢迎来看看， &lt;a href="https://storage.sakuya.love"&gt;SiHuan's onedrive index&lt;/a&gt; 🎉&lt;/p&gt;
&lt;!--stackedit_data:
eyJoaXN0b3J5IjpbLTg1MDc2NjkyNV19
--&gt;</description><author>sihuan@sakuya.love (SiHuan)</author><guid isPermaLink="true">/archives/two-drive/</guid><pubDate>Thu, 26 Nov 2020 11:06:00 +0806</pubDate></item></channel></rss>