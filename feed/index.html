<?xml version='1.0' encoding='UTF-8'?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0"><channel><title>SiHuan's Blog</title><link>/</link><description>道阻且长，吾意思还。</description><docs>http://www.rssboard.org/rss-specification</docs><generator>python-feedgen</generator><image><url>/logo.png</url><title>SiHuan's Blog</title><link>/</link></image><language>zh-CN</language><lastBuildDate>Wed, 31 Jan 2024 08:39:26 +0806</lastBuildDate><pubDate>Wed, 31 Jan 2024 08:39:26 +0806</pubDate><item><title>Shitama 代码分析「概况」</title><link>/archives/shitama1/</link><description>&lt;blockquote&gt;&lt;p&gt;别看了全是胡扯，我之前理解错有问题，没认真读代码&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;Shitama 的历史&lt;/h1&gt;
&lt;blockquote&gt;&lt;p&gt;「Shitama」是一个类毛玉服务，可以为「东方非想天则」提供简单的端口转发功能，让身处内网的玩家能够建立主机并进行对战。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;根据 Shitama 的 commit 的记录原作者应该是 &lt;a href="https://github.com/evshiron"&gt;evshiron&lt;/a&gt; ，不过现在 evshiron 的 github 上已经找不到 shitama 的相关源码，可以找到的是 &lt;a href="https://github.com/u-u-z/shitama"&gt;Remi_IO 的一份 fork&lt;/a&gt;，现在 &lt;a href="https://github.com/Si-Huan/shitama"&gt;Si-Huan/shitama&lt;/a&gt; 便是 fork 自 Remi_IO 的 fork .&lt;/p&gt;
&lt;h1&gt;非想天则联机机制与 Shitama 实现的功能&lt;/h1&gt;
&lt;p&gt;接下来，因为懒，我会将 Shitama 写为 shitama.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;在此约定: 下文中 &lt;u&gt;主机方&lt;/u&gt; 根据不同语境，指 &lt;u&gt;在联机对战中建立主机的那个人&lt;/u&gt;、&lt;u&gt;在联机对战中建立主机的那个游戏客户端&lt;/u&gt; 或者 &lt;u&gt;在联机对战中建立主机一方的电脑&lt;/u&gt;。&lt;u&gt;客机方&lt;/u&gt; 指什么大家自己类推一下吧（&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;先简略说一下非想天则的联机机制，主机方指定本地端口建立房间，客机方输入主机方 ip:port  进行连接。&lt;/p&gt;
&lt;p&gt;那么现在的问题是：&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;如今，网络地址转换（Network Address Translation，NAT）设备如光猫、路由器等日益普及，许多联网设备失去了被从公网访问的能力。尽管某些情况下可以通过调整配置解决，例如对所有途径的NAT设备进行端口映射如配置虚拟服务器、DMZ主机，在多数情况下人们并没有调整配置的权限，如小区宽带，运营商NAT，网吧路由器，甚至拿不到超级帐号的光猫等等。&lt;a href="https://github.com/Si-Huan/shitama/blob/master/docs/zh_CN/Watching.md"&gt;Watching.md&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;shitama 实现的功能是：&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;类毛玉正是为了解决这个问题而出现的。有别于虚拟局域网如Hamachi、QQ对战平台、浩方对战平台、游侠对战平台，类毛玉通过将非想天则主机的端口转发到公网服务器上，使其它用户可以通过公网服务器的端口连接到处于内网的主机，从而进行对战。&lt;a href="https://github.com/Si-Huan/shitama/blob/master/docs/zh_CN/Watching.md"&gt;Watching.md&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;shitama 构成与一次联机的工作过程图示&lt;/h1&gt;
&lt;p&gt;shitama 的分为四部分:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;clinet&lt;/li&gt;
&lt;li&gt;holder&lt;/li&gt;
&lt;li&gt;shard&lt;/li&gt;
&lt;li&gt;client-ui-qt&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其中第四部分是 client 的一个壳，与 client 本体通过 http 通信。使用 Qt/C++ 编写，其余部分使用 go 编写，因为本菜鸡全然不了解 Qt/C++ ，故 client-ui-qt 不在本文讨论范围。&lt;/p&gt;
&lt;p&gt;在此呢，我先放几张图，大致展示一下在 shitama 帮助下一次联机的过程&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;client 向 holder 发起中转请求，请求中指定了 shardAddr 与 transport，即 shard 地址和使用的传输协议（目前只有 UDP 可选）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;holder 收到请求后向被指定的 shard 发起中转请求&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="912" data-height="660" src="/archives/assets/425f820ca9895723772d477ebc81545b.png" alt="申请中转" /&gt;&lt;figcaption&gt;申请中转&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;shard 收到请求后会准备两个端口，此处几位 HostPort 和 GuestPort。并向 holder 返回这两个端口号&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;holder 收到 shard 发来的端口后向 client 返回这两个端口号&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="912" data-height="660" src="/archives/assets/81d12fb47f947784978b8c710bb7951e.png" alt="shard 返回端口号" /&gt;&lt;figcaption&gt;shard 返回端口号&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;client 得知 shard 已经准备好两个端口后，会建立和 shard:HostPort 的链接，并把 shard:GuestPort 展示给使用者，这时候 client 的使用者就可以通过 im 把 shard:GuestPort 发送给客机方。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;客机方在游戏客户端填入 shard:GuestPort 进行联机对战&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1195" data-height="660" src="/archives/assets/c8b91a3391ee5b4f04d4eac1e7ef7ff4.png" alt="链接建立" /&gt;&lt;figcaption&gt;链接建立&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;不难发现其中相对复杂的部分是 shard HostPort 与 GuestPort 之间发生了什么，以及主机方游戏客户端（一般来说为主机方的 10800 端口）与 client 发生了什么。&lt;/p&gt;
&lt;p&gt;其实简略来说的话就是，shard GuestPort  和 客机方建立通信，HostPort 和 client 的某个端口（记作 Port1）通信，clinet 的另一个端口（记作 Port2）和主机方游戏客户端通信，主机方客户端发送数据给 Port2， Port2 收到数据会使用 Port1 发出去，也就是发给 HostPort，HostPort 收到数据会通过 GuestPort 发出去也就是发给客机方游戏客户端。因为涉及到观战的问题，主机方 client 的实际情况&lt;del&gt;要比我说的复杂一些&lt;/del&gt;远比我说的复杂。&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1346" data-height="372" src="/archives/assets/a45ce6fb1094844897e18bd373f45524.png" alt="how_shitama_work4" /&gt;&lt;figcaption&gt;how_shitama_work4&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;图中虚线的意味： shard1 中由 HostPort 指向 GuestPort 的虚线意味着 HostPort 并不会向 GuestPort 发送数据，而是每当 HostPort 收到来自 Port1 的数据就会使用 GuestPort 发送出去。也就是说 HostPort 只与 Port1 通信。&lt;/p&gt;
&lt;p&gt;接下来的几篇博文会比较&lt;del&gt;正经&lt;/del&gt;的分析 shitama 的代码。&lt;/p&gt;
</description><author>sihuan@sakuya.love (SiHuan)</author><guid isPermaLink="true">/archives/shitama1/</guid><pubDate>Mon, 01 Jun 2020 11:06:00 +0806</pubDate></item><item><title>Shitama 代码分析「holder 启动」</title><link>/archives/shitama2/</link><description>&lt;blockquote&gt;&lt;p&gt;别看了，全是胡扯，我之前没认真读代码&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;这是开头&lt;/h1&gt;
&lt;p&gt;因为按逻辑上，shitama 的运行顺序应该是 「holder 启动」、「shard 启动」、「client 启动」和 「链接建立」。我也就先按照这个来分析。&lt;/p&gt;
&lt;h1&gt;结构&lt;/h1&gt;
&lt;h2&gt;目录结构&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;holder
├── lib
│   ├── clientInfo.go
│   ├── holder.go
│   ├── server.go
│   ├── shardInfo.go
│   └── tunnel.go
└── main.go&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;结构体结构&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;./lib/holder.go&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;type&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;Holder&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;struct&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;logger&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;logrus&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Logger&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;Tunnel&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;Tunnel&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;Server&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;Server&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;shards&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="nx"&gt;ShardInfo&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;clients&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt;&lt;span class="nx"&gt;ClientInfo&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;./lib/tunnel.go&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;type&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;Tunnel&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;struct&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;OnConnected&lt;/span&gt;&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nx"&gt;EventBus&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Bus&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;OnDisconnected&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="nx"&gt;EventBus&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Bus&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;OnRequestReceived&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nx"&gt;EventBus&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Bus&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;OnPublishReceived&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nx"&gt;EventBus&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Bus&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;OnPeerConnected&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;EventBus&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Bus&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;OnPeerDisconnected&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;EventBus&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Bus&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;parent&lt;/span&gt;&lt;span class="w"&gt;             &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;Holder&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;./lib/server.go&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;type&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;Server&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;struct&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;parent&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;Holder&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;./lib/shardInfo.go&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;type&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;ShardInfo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;struct&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;common&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;ShardInfo&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;conn&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;kcp&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;UDPSession&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;session&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;yamux&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Session&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;../common/shardInfo.go&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;type&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;ShardInfo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;struct&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;Addr&lt;/span&gt;&lt;span class="w"&gt;     &lt;/span&gt;&lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;`json:&amp;quot;addr&amp;quot;`&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;IP&lt;/span&gt;&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;`json:&amp;quot;ip&amp;quot;`&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;EchoPort&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="s"&gt;`json:&amp;quot;echoPort&amp;quot;`&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;./lib/clientInfo.go&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;type&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;ClientInfo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;struct&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;common&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;ClientInfo&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;conn&lt;/span&gt;&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;kcp&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;UDPSession&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;session&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nx"&gt;yamux&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Session&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;../common/clientInfo.go&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;type&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;ClientInfo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;struct&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;Addr&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;`json:&amp;quot;addr&amp;quot;`&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h1&gt;holder 启动时函数调用顺序&lt;/h1&gt;

&lt;pre&gt;&lt;code&gt;
&lt;/code&gt;&lt;/pre&gt;
</description><author>sihuan@sakuya.love (SiHuan)</author><guid isPermaLink="true">/archives/shitama2/</guid><pubDate>Sun, 07 Jun 2020 11:06:00 +0806</pubDate></item><item><title>Utsutsu 用法</title><link>/archives/utsutsu1/</link><description>&lt;h1&gt;夢と現&lt;/h1&gt;
&lt;blockquote&gt;&lt;p&gt;一个打则工具，与 shitama 原理上略有不同，也许会对某些网络有奇效。&lt;/p&gt;
&lt;p&gt;现在还是仅仅能用的阶段，没有图形界面，只有一个服务器可以选择（也就是，没得选）&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;用法&lt;/h2&gt;
&lt;h3&gt;建立主机&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;打开 utsutsu ，输入 &lt;code&gt;c&lt;/code&gt; 并回车，根据提示输入昵称之后回车，然后就不用管了 utsutsu 了&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1060" data-height="171" src="/archives/assets/3199f8ecc4987704d5a1c9125d7804e7.png" alt="主机 utsutus" /&gt;&lt;figcaption&gt;主机 utsutus&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;打开非想天则，选择网络对战，使用默认端口 &lt;code&gt;10800&lt;/code&gt; 建立主机&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="647" data-height="517" src="/archives/assets/87bbb9b5946912fc9a614fa763c22ac8.png" alt="主机 则" /&gt;&lt;figcaption&gt;主机 则&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;等待连入就 OK 啦&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;客机连入&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;和 shitama 不同的地方是，客机也需要使用 utsutsu 才行（&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;打开 utsutsu ，输入 &lt;code&gt;x&lt;/code&gt; 并回车，输入想连接的对手的序号之后回车&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1042" data-height="252" src="/archives/assets/93a9b7c10ea09f4d9669739dc84c2747.png" alt="客机 utsutsu" /&gt;&lt;figcaption&gt;客机 utsutsu&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;不用在意为啥会有两个 sakuya （ 这个问题有待处理，所以大家在建主的时候要用自己特色的名字&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;打开非想天则，选择网络对战，连接 &lt;code&gt;127.0.0.1：31106&lt;/code&gt; 这个 IP 地址进行对战（这个地址是不会变化）&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="638" data-height="513" src="/archives/assets/9e7de25d0b2b543f794afbcb90575392.png" alt="客机 则" /&gt;&lt;figcaption&gt;客机 则&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;最后&lt;/h2&gt;
&lt;p&gt;这个东西现在问题很多，但是如果按照上述操作至少是可以用的。&lt;/p&gt;
&lt;p&gt;已知问题&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;建立主机的人退出 utsutsu 之后，需要一段时间才不会在客机的列表里出现&lt;/li&gt;
&lt;li&gt;按 p 无法退出，这个在做了&lt;/li&gt;
&lt;li&gt;等等等 不想写了 太多&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;遇到问题之后现在较好的解决方案是重启 utsutsu （&lt;/p&gt;
</description><author>sihuan@sakuya.love (SiHuan)</author><guid isPermaLink="true">/archives/utsutsu1/</guid><pubDate>Fri, 24 Jul 2020 11:06:00 +0806</pubDate></item><item><title>部署一个自己的人工智障机器人</title><link>/archives/xzz/</link><description>&lt;blockquote&gt;&lt;p&gt;2020/08/02 由于一些原因，将我的 QQ 机器人从 &lt;em&gt;酷Q&lt;/em&gt; 迁移到 开源的 &lt;em&gt;MiraiGo&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;顺便写下了此文档&lt;/p&gt;
&lt;p&gt;此文用到的项目&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Mrs4s/MiraiGo"&gt;MiraiGo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Mrs4s/go-cqhttp"&gt;go-cqhttp&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Si-Huan/XZZ"&gt;XZZ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2&gt;准备工作&lt;/h2&gt;
&lt;h3&gt;安装 Python 环境并克隆 XZZ&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;因为机器人的逻辑部分，也就西 XZZ 是 Python 写的，所以需要 Python 环境&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在 ArchLinux 中，安装 python&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;pacman&lt;span class="w"&gt; &lt;/span&gt;-S&lt;span class="w"&gt; &lt;/span&gt;python
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;克隆 XZZ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git&lt;span class="w"&gt; &lt;/span&gt;clone&lt;span class="w"&gt; &lt;/span&gt;https://github.com/Si-Huan/XZZ.git
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;编译或下载 go-cqhttp&lt;/h3&gt;
&lt;h4&gt;编译&lt;/h4&gt;
&lt;p&gt;克隆仓库&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git&lt;span class="w"&gt; &lt;/span&gt;clone&lt;span class="w"&gt; &lt;/span&gt;https://github.com/Mrs4s/go-cqhttp.git
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;编译&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;go-cqhttp&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;go&lt;span class="w"&gt; &lt;/span&gt;build
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;&lt;p&gt;tips: 自备 go 环境&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4&gt;下载&lt;/h4&gt;
&lt;p&gt;前往 &lt;a href="https://github.com/Mrs4s/go-cqhttp/releases"&gt;Releases 页面&lt;/a&gt; 下载自己系统对应的版本&lt;/p&gt;
&lt;h3&gt;安装并启动 Redis 数据库 （可选）&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;可选但推荐，不然可能有一些服务无法使用&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在 ArchLinux 下&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;pacman&lt;span class="w"&gt; &lt;/span&gt;-S&lt;span class="w"&gt; &lt;/span&gt;redis
sudo&lt;span class="w"&gt; &lt;/span&gt;systemctl&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;enable&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;redis.service&lt;span class="w"&gt; &lt;/span&gt;--now
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;&lt;p&gt;tips: 请保持 redis 服务运行在 XZZ 同服务器 6379 端口&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;开始配置&lt;/h2&gt;
&lt;p&gt;我们假设你现在的目录结果如下&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;.
├── bot
│   └── go-cqhttp
└── xzz
    ├── exmple.json
    ├── main.py
    ├── README.md
    ├── req.txt
    ├── route.py
    ├── sample_config.py
    ├── test.py
    ├── worker
    └── zzcore.py&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;其中 &lt;code&gt;xzz&lt;/code&gt; 文件夹下是你第一步克隆的 XZZ&lt;/p&gt;
&lt;p&gt;其中 &lt;code&gt;bot&lt;/code&gt; 文件夹下的 &lt;code&gt;go-cqhttp&lt;/code&gt; 是你在第一步下载或编译的 go-cqhttp 的可执行文件&lt;/p&gt;
&lt;h3&gt;初始化并配置 go-cqhttp&lt;/h3&gt;
&lt;p&gt;移步至 &lt;code&gt;bot&lt;/code&gt; 文件夹下启动 &lt;code&gt;go-cqhttp&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;你会看到以下信息，程序会自动退出&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;[2020-08-02 22:25:17] [WARNING]: 尝试加载配置文件 config.json 失败: 文件不存在 
[2020-08-02 22:25:17] [INFO]: 默认配置文件已生成, 请编辑 config.json 后重启程序.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;现在你的目录结果大概是这样&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;.
├── bot
│   ├── config.json
│   ├── data
│   ├── go-cqhttp
│   └── logs
└── xzz
    ├── exmple.json
    ├── main.py
    ├── README.md
    ├── req.txt
    ├── route.py
    ├── sample_config.py
    ├── test.py
    ├── worker
    └── zzcore.py&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;我们去编辑 &lt;code&gt;./bot/config.json&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;uin&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1010101010&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;password&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;mima&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;enable_db&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;access_token&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;token&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;relogin&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;relogin_delay&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;http_config&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;enabled&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;host&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;127.0.0.1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;port&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;5700&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;post_urls&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;127.0.0.1:5580&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;XZZ&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;ws_config&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;enabled&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;host&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;0.0.0.0&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;port&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;6700&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;ws_reverse_servers&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;enabled&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;reverse_url&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;ws://you_websocket_universal.server&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;reverse_api_url&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;ws://you_websocket_api.server&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;reverse_event_url&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;ws://you_websocket_event.server&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;reverse_reconnect_interval&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3000&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}],&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;&amp;quot;debug&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;需要编辑的字段如下&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;&lt;tr&gt;
&lt;th style="text-align:left"&gt;字段&lt;/th&gt;
&lt;th&gt;类型&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="text-align:left"&gt;uin&lt;/td&gt;
&lt;td&gt;int64&lt;/td&gt;
&lt;td&gt;登录用 QQ 号&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left"&gt;password&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;登录用密码&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left"&gt;access_token&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;用于与 XZZ 交互是身份认证&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left"&gt;http_config&lt;/td&gt;
&lt;td&gt;object&lt;/td&gt;
&lt;td&gt;HTTP API 配置，可与上面我给出的配置一致&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left"&gt;ws_config.enable&lt;/td&gt;
&lt;td&gt;bool&lt;/td&gt;
&lt;td&gt;XZZ 不需要用到 ws， 请设置为 false&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="text-align:left"&gt;ws_reverse_servers.enable&lt;/td&gt;
&lt;td&gt;bool&lt;/td&gt;
&lt;td&gt;同上，设置为 false&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;一会配置 XZZ 需要用到的字段有 &lt;code&gt;access_token&lt;/code&gt; 、 &lt;code&gt;http_config.host&lt;/code&gt; 、 &lt;code&gt;http_config.port&lt;/code&gt; 、 &lt;code&gt;http_config.post_urls&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;如果 &lt;code&gt;go-cqhttp&lt;/code&gt; 与 &lt;code&gt;XZZ&lt;/code&gt; 没有运行在同一台服务器上请将 &lt;code&gt;http_config.host&lt;/code&gt; 设置为 &lt;code&gt;0.0.0.0&lt;/code&gt; ，&lt;code&gt;http_config.post_urls&lt;/code&gt; 设置为 &lt;code&gt;XZZ&lt;/code&gt; 运行时监听的端口&lt;/p&gt;
&lt;p&gt;配置完成之后我们就可以启动 &lt;code&gt;go-cqhttp&lt;/code&gt; 了，启动的时候第一次登陆 QQ 可能需要验证码，按字符画输入即可，之后将 &lt;code&gt;go-cqhttp&lt;/code&gt; 切到后台，进行下一步。&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;可以使用如 &lt;strong&gt;screen&lt;/strong&gt; 这种工具将 &lt;code&gt;go-cqhttp&lt;/code&gt; 挂在后台&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;配置 XZZ&lt;/h3&gt;
&lt;p&gt;移步至 &lt;code&gt;xzz&lt;/code&gt; 文件夹下&lt;/p&gt;
&lt;p&gt;创建虚拟环境&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;python&lt;span class="w"&gt; &lt;/span&gt;-m&lt;span class="w"&gt; &lt;/span&gt;venv&lt;span class="w"&gt; &lt;/span&gt;env
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;激活虚拟环境&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;source&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;./env/bin/activate
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;安装依赖&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pip&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;-r&lt;span class="w"&gt; &lt;/span&gt;req.txt
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;配置 XZZ&lt;/p&gt;
&lt;p&gt;复制一份 &lt;code&gt;sample_config.py&lt;/code&gt; 到 &lt;code&gt;config.py&lt;/code&gt;，并编辑&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ALLWORKERS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bbc&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bc&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bing&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;echo&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;mc&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;music&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;ping&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;shi&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;wolfram&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;yiyan&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;help&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;APIURL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://127.0.0.1:5700/&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;AUTHORIZATION&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;token&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;PORT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;5580&lt;/span&gt;

&lt;span class="n"&gt;BINGKEY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;WOLFRAMALPHAAPPID&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;LOLIKEY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;以上必须要配置的有&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;APIURL&lt;/code&gt; 为上文 &lt;strong&gt;go-cqhttp&lt;/strong&gt; HTTP API 所在的地址，与上文  &lt;code&gt;http_config.host&lt;/code&gt; 、 &lt;code&gt;http_config.port&lt;/code&gt; 有关，如果上面这两个和我设置的一样，那么这儿为 &lt;code&gt;127.0.0.1:5700&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;AUTHORIZATION&lt;/code&gt; 与上文 &lt;code&gt;access_token&lt;/code&gt; 相同，这儿为 &lt;code&gt;token&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;PORT&lt;/code&gt; &lt;strong&gt;XZZ&lt;/strong&gt; 要监听的端口，这儿设置为 &lt;code&gt;5580&lt;/code&gt; ，请保证上文 &lt;code&gt;http_config.post_urls&lt;/code&gt; 中的端口与此一致，以便 &lt;strong&gt;go-cqhttp&lt;/strong&gt; 可以访问到 &lt;strong&gt;XZZ&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其余参数可选&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;ALLWORKERS&lt;/code&gt; 使用 &lt;code&gt;/help&lt;/code&gt; 命令时所列出的项目&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;BINGKEY&lt;/code&gt; 如需要使用 &lt;code&gt;/bing&lt;/code&gt; 命令必须添加，申请地址 （以后加）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;WOLFRAMALPHAAPPID&lt;/code&gt;  如需要使用 &lt;code&gt;/wolfram&lt;/code&gt; 命令必须添加，申请地址 （以后加）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;LOLIKEY&lt;/code&gt; 如需要使用 &lt;code&gt;/pixiv&lt;/code&gt; 命令必须添加，申请地址 （以后加）&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;配置完毕之后，启动 XZZ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;python&lt;span class="w"&gt; &lt;/span&gt;main.py
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;和上文 对 go-cqhttp 的处理一样，挂在后台就好了&lt;/p&gt;
&lt;h3&gt;测试！&lt;/h3&gt;
&lt;p&gt;在群聊发生 &lt;code&gt;/ping&lt;/code&gt; ，bot 是不是回复了 &lt;code&gt;Pong&lt;/code&gt; 呢？&lt;/p&gt;
&lt;h2&gt;另外&lt;/h2&gt;
&lt;p&gt;XZZ 功能的开发超级方便，如果有兴趣的话，欢迎来给 XZZ 添加功能 ~&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/Si-Huan/XZZ"&gt;https://github.com/Si-Huan/XZZ&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;啊这 终于写完了， 又水了一篇 23333&lt;/p&gt;
&lt;/blockquote&gt;
</description><author>sihuan@sakuya.love (SiHuan)</author><guid isPermaLink="true">/archives/xzz/</guid><pubDate>Sun, 02 Aug 2020 11:06:00 +0806</pubDate></item><item><title>今天收获了两个网盘诶</title><link>/archives/two-drive/</link><description>&lt;h1&gt;今天又干了不少事情呢&lt;/h1&gt;
&lt;p&gt;欢迎来看看， &lt;a href="https://storage.sakuya.love"&gt;SiHuan's onedrive index&lt;/a&gt; 🎉&lt;/p&gt;
&lt;!--stackedit_data:
eyJoaXN0b3J5IjpbLTg1MDc2NjkyNV19
--&gt;</description><author>sihuan@sakuya.love (SiHuan)</author><guid isPermaLink="true">/archives/two-drive/</guid><pubDate>Thu, 26 Nov 2020 11:06:00 +0806</pubDate></item><item><title>今日份笑话</title><link>/archives/linuxorwinjoke/</link><description>&lt;h2&gt;笑话&lt;/h2&gt;
&lt;p&gt;今天在看到一些东西，以下原文&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;《一则讽刺笑话》&lt;/strong&gt;
&lt;strong&gt;世人说，要有罐头，便有了罐头。&lt;/strong&gt;
&lt;strong&gt;世人说，罐头打不开，便有了开罐器。&lt;/strong&gt;
&lt;strong&gt;哥哥说，我力气大，不需要开罐器，便自顾自地夸耀起了罐头的设计&lt;/strong&gt;
&lt;strong&gt;妹妹说，&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="248" data-height="390" src="/archives/assets/c6e9e60f076ddbe3cbba7cb3b5680800.png" alt="被饿死的妹妹" /&gt;&lt;figcaption&gt;被饿死的妹妹&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;续&lt;/h2&gt;
&lt;h3&gt;缘起&lt;/h3&gt;
&lt;p&gt;第一批没有力气又买不起开罐器的妹妹果然饿死了&lt;/p&gt;
&lt;h3&gt;第一节&lt;/h3&gt;
&lt;p&gt;有力气的哥哥们在吃饱了之后，成立了好哥哥联盟，开始研发简陋开瓶装置，免费给妹妹们用&lt;/p&gt;
&lt;h3&gt;第二节&lt;/h3&gt;
&lt;p&gt;那些买来开瓶器的妹妹开始嘲讽免费开瓶装置的又不好看又划手。妹妹向哥哥反应这个问题，哥哥着手解决了划手的问题，但是表示可能没精力整好看点了&lt;/p&gt;
&lt;h3&gt;第三节&lt;/h3&gt;
&lt;p&gt;有些妹子开始学习自己把开瓶装置整好看点，因为哥哥告诉了我们开瓶装置的构造。但是水平不同，审美不同，参差不齐，又遭了用整齐划一、美观优雅开瓶器的妹妹的白眼&lt;/p&gt;
&lt;h3&gt;第四节&lt;/h3&gt;
&lt;p&gt;开瓶器厂商联合罐头厂开始生产只有开瓶器可以开的罐头，在吃了几天过期老式罐头之后，不用开瓶器的妹子等到了哥哥的更新&lt;/p&gt;
&lt;h3&gt;第五节（开始离谱 2333）&lt;/h3&gt;
&lt;p&gt;用开瓶器的妹子在开瓶器&lt;del&gt;某次更新&lt;/del&gt;之后开始感觉到每次使用&lt;del&gt;都会被 -1s&lt;/del&gt;，遂去询问，说：“奸商奸商，怎么回事”，奸商说：“&lt;del&gt;原来是昨天，我更新之后，加了xxxx&lt;/del&gt; 没有的事！和以前一样，我们只是进行了常规性更新！”妹子相信了奸商，“你们只要钱就好。”&lt;/p&gt;
&lt;h3&gt;第六节&lt;/h3&gt;
&lt;p&gt;哥哥做的这个东西，又不是不能用，而且还挺有意义的嘛&lt;/p&gt;
&lt;h2&gt;尾巴&lt;/h2&gt;
&lt;p&gt;拐弯抹角真伤脑筋，有啥说啥呗&lt;/p&gt;
&lt;p&gt;以后不会发这么无聊的东西了🙈&lt;/p&gt;
</description><author>sihuan@sakuya.love (SiHuan)</author><guid isPermaLink="true">/archives/linuxorwinjoke/</guid><pubDate>Fri, 01 Jan 2021 11:06:00 +0806</pubDate></item><item><title>使用 Docker 安装 ROS</title><link>/archives/ros-install-docker/</link><description>&lt;blockquote&gt;&lt;p&gt;本文使用的操作系统是 &lt;code&gt;ArchLinux&lt;/code&gt;，用户名是 &lt;code&gt;sihuan&lt;/code&gt;，使用的 ROS 版本是 ROS1  &lt;code&gt;kinetic&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;采用 docker 来安装 ROS 配置环境，此方法方便切换 ROS 版本，安装起来也比较方便&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;安装 docker，启动 docker 服务，并把当前用户加入到 &lt;code&gt;docker&lt;/code&gt; 用户组&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pacman&lt;span class="w"&gt; &lt;/span&gt;-S&lt;span class="w"&gt; &lt;/span&gt;docker
systemctl&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;enable&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;--now&lt;span class="w"&gt; &lt;/span&gt;docker.service
gpasswd&lt;span class="w"&gt; &lt;/span&gt;-a&lt;span class="w"&gt; &lt;/span&gt;sihuan&lt;span class="w"&gt; &lt;/span&gt;docker
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;&lt;p&gt;Tips: 需要重新登录以使用户组更改生效&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;拉取 ROS docker 镜像&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 此处以 kinetic-desktop-full 为例&lt;/span&gt;
docker&lt;span class="w"&gt; &lt;/span&gt;pull&lt;span class="w"&gt; &lt;/span&gt;osrf/ros:kinetic-desktop-full
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;配置启动脚本，准备工作目录&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;以下文件均在 host 机器上创建编辑&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;递归创建工作目录，此处以 &lt;code&gt;~/project/ros/kinetic/catkin_ws&lt;/code&gt; 为例&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mkdir&lt;span class="w"&gt; &lt;/span&gt;-p&lt;span class="w"&gt; &lt;/span&gt;~/project/ros/kinetic/catkin_ws/src
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;创建并编辑 &lt;code&gt;~/project/ros/kinetic/.bashrc&lt;/code&gt;，此文件是给 docker 中的系统准备的 bash 配置文件&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ros-env&lt;span class="o"&gt;(){&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;source&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;/opt/ros/kinetic/setup.bash
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;source&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;/home/sihuan/catkin_ws/devel/setup.bash
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;ROS_PACKAGE_PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/home/sihuan/catkin_ws/:/opt/ros/kinetic/share/
&lt;span class="o"&gt;}&lt;/span&gt;
ros-env
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;编辑 &lt;code&gt;~/.bashrc&lt;/code&gt; 在最后添加以下内容，这是用来启动、连接、清理 docker 容器的函数&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# krstart(kinetic ros start) 会启动一个 ros:kinetic-desktop-full 容器&lt;/span&gt;
krstart&lt;span class="o"&gt;(){&lt;/span&gt;
docker&lt;span class="w"&gt; &lt;/span&gt;run&lt;span class="w"&gt; &lt;/span&gt;-it&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;--user&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;id&lt;span class="w"&gt; &lt;/span&gt;-u&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$USER&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;:&lt;span class="k"&gt;$(&lt;/span&gt;id&lt;span class="w"&gt; &lt;/span&gt;-g&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$USER&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;--env&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;DISPLAY&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;--workdir&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/home/&lt;/span&gt;&lt;span class="nv"&gt;$USER&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;--volume&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/home/&lt;/span&gt;&lt;span class="nv"&gt;$USER&lt;/span&gt;&lt;span class="s2"&gt;/project/ros/kinetic:/home/&lt;/span&gt;&lt;span class="nv"&gt;$USER&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;--volume&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/etc/group:/etc/group:ro&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;--volume&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/etc/passwd:/etc/passwd:ro&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;--volume&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/etc/shadow:/etc/shadow:ro&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;--volume&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/etc/sudoers.d:/etc/sudoers.d:ro&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;--volume&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/tmp/.X11-unix:/tmp/.X11-unix:rw&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;osrf/ros:kinetic-desktop-full&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;bash
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;# krconnect 会连接到正在运行的 kinetic docker 容器中&lt;/span&gt;
krconnect&lt;span class="o"&gt;(){&lt;/span&gt;
docker&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;exec&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-ti&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;docker&lt;span class="w"&gt; &lt;/span&gt;ps&lt;span class="w"&gt; &lt;/span&gt;-aq&lt;span class="w"&gt; &lt;/span&gt;--filter&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;ancestor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;osrf/ros:kinetic-desktop-full&lt;span class="w"&gt; &lt;/span&gt;--filter&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;status&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;running&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;bash
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;# 清理已经停止的 kinetic 容器&lt;/span&gt;
krclean&lt;span class="o"&gt;(){&lt;/span&gt;
docker&lt;span class="w"&gt; &lt;/span&gt;rm&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;docker&lt;span class="w"&gt; &lt;/span&gt;ps&lt;span class="w"&gt; &lt;/span&gt;-aq&lt;span class="w"&gt; &lt;/span&gt;--filter&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;ancestor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;osrf/ros:kinetic-desktop-full&lt;span class="w"&gt; &lt;/span&gt;--filter&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;status&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;exited
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;&lt;p&gt;Tips&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;docker 的启动脚本中使用了 &lt;code&gt;--user&lt;/code&gt; 参数并以只读方式映射了 host 机器 &lt;code&gt;/etc/group&lt;/code&gt; 等用户和组相关文件，目的是为了以当前用户 &lt;code&gt;sihuan&lt;/code&gt; 的身份登入到 docker 中，避免在 host 机器编辑源文件时候的权限问题&lt;/li&gt;
&lt;li&gt;host 机器 &lt;code&gt;/home/sihuan/project/ros/kinetic&lt;/code&gt; 目录被挂载到 docker 里 &lt;code&gt;/home/sihuan/&lt;/code&gt;  位置，也即 docker 里的 ROS 的工作空间 &lt;code&gt;/home/sihuan/catkin_ws&lt;/code&gt; 可通过 host 机器 &lt;code&gt;/home/sihuan/project/ros/kinetic/catkin_ws&lt;/code&gt; 目录进行访问、编辑。&lt;/li&gt;
&lt;li&gt;启动脚本中还影射了 X11 服务相关文件，使得在 docker 中可以访问 host 机器 X 服务以运行图形界面程序（这要求 host 机器运行 X11 服务）&lt;/li&gt;
&lt;li&gt;启用硬件加速 #TODO&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;启动容器&lt;/p&gt;
&lt;p&gt;在 host 机器上运行 &lt;code&gt;krstart&lt;/code&gt; 就可以启动一个装有 kinetic 的 docker 容器，初次启动可能会遇到一下报错，是预期内错误，使用 &lt;code&gt;catkin_make&lt;/code&gt; 来初始化工程后，就不再有这个问题。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 在 host 机器执行&lt;/span&gt;
krstart
&lt;span class="c1"&gt;# 出现以下预期内错误&lt;/span&gt;
bash:&lt;span class="w"&gt; &lt;/span&gt;/home/sihuan/catkin_ws/devel/setup.bash:&lt;span class="w"&gt; &lt;/span&gt;No&lt;span class="w"&gt; &lt;/span&gt;such&lt;span class="w"&gt; &lt;/span&gt;file&lt;span class="w"&gt; &lt;/span&gt;or&lt;span class="w"&gt; &lt;/span&gt;directory
&lt;span class="c1"&gt;# 在 docker 里进入工作目录并初始化工程&lt;/span&gt;
&lt;span class="nb"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;~/catkin_ws
catkin_make
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;此时再运行 &lt;code&gt;roscore&lt;/code&gt; 应该看到以下输出&lt;/p&gt;
&lt;p&gt;```
sihuan@a9d3b860cafe:~/catkin_ws$ roscore
... logging to /home/sihuan/.ros/log/fbbe12d2-dab9-11ed-a2a2-0242ac110002/roslaunch-a9d3b860cafe-521.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is &amp;lt;1GB.&lt;/p&gt;
&lt;p&gt;started roslaunch server &lt;a href="http://a9d3b860cafe:35231/"&gt;http://a9d3b860cafe:35231/&lt;/a&gt;
ros_comm version 1.12.17&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;

&lt;pre&gt;&lt;code&gt;  SUMMARY
  ========

  PARAMETERS
   * /rosdistro: kinetic
   * /rosversion: 1.12.17

  NODES

  auto-starting new master
  process[master]: started with pid [531]
  ROS_MASTER_URI=http://a9d3b860cafe:11311/

  setting /run_id to fbbe12d2-dab9-11ed-a2a2-0242ac110002
  process[rosout-1]: started with pid [544]
  started core service [/rosout]
  ```

  至此安装工作已经完成，可以在 host 机器中使用文本编辑器编辑源码，然后在 docker 中进行编译、运行。

  &amp;gt; Tips：由于 docker 中 `~/catkin_ws/src/CMakeLists.txt` 是指向 `/opt/ros/kinetic/share/catkin/cmake/toplevel.cmake` 的软连接，在 host 机器上编辑此文件会遇到一些问题，如有需要请在 docker 中编辑该文件。&lt;/code&gt;&lt;/pre&gt;
</description><author>sihuan@sakuya.love (SiHuaN)</author><guid isPermaLink="true">/archives/ros-install-docker/</guid><pubDate>Thu, 20 Apr 2023 11:06:00 +0806</pubDate></item><item><title>记一次简单的 openEuler 修包经历</title><link>/archives/openeuler-fix-build/</link><description>&lt;h2&gt;给 openEuler 修个包吧!&lt;/h2&gt;
&lt;blockquote&gt;&lt;p&gt;这篇咕咕咕了，没写完，以下原文（的一部分）&lt;/p&gt;
&lt;p&gt;记录一下修复一个包的完整流程&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;一些小前提:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;需要一个 &lt;a href="https://gitee.com/"&gt;gitee&lt;/a&gt; 账户, 因为要给 &lt;a href="https://gitee.com/src-openeuler"&gt;src-openeuler&lt;/a&gt; 提交 pr&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;注册一个 openEuler 的 &lt;a href="https://build.openeuler.openatom.cn/"&gt;obs&lt;/a&gt; 账户并在本地配置好 osc&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Tips:  配置 osc 可能遇到的坑&lt;/p&gt;
&lt;p&gt;​   新版本的 osc 配置文件位于 &lt;code&gt;~/.config/osc/oscrc&lt;/code&gt; 而不是 &lt;code&gt;~/.oscrc&lt;/code&gt; 或 &lt;code&gt;~/.config/oscrc&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;&lt;p&gt;采用 docker 来安装 ROS 配置环境，此方法方便切换 ROS 版本安装起来也比较方便&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;安装 docker，启动 docker 服务，并把当前用户加入到 &lt;code&gt;docker&lt;/code&gt; 用户组&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pacman&lt;span class="w"&gt; &lt;/span&gt;-S&lt;span class="w"&gt; &lt;/span&gt;docker
systemctl&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;enable&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;--now&lt;span class="w"&gt; &lt;/span&gt;docker.service
gpasswd&lt;span class="w"&gt; &lt;/span&gt;-a&lt;span class="w"&gt; &lt;/span&gt;sihuan&lt;span class="w"&gt; &lt;/span&gt;docker
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;&lt;p&gt;Tips: 需要重新登录以使用户组更改生效&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;拉取 ROS docker 镜像&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 此处以 kinetic-desktop-full 为例&lt;/span&gt;
docker&lt;span class="w"&gt; &lt;/span&gt;pull&lt;span class="w"&gt; &lt;/span&gt;osrf/ros:kinetic-desktop-full
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;配置启动脚本，准备工作目录&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;以下文件均在 host 机器上创建编辑&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;递归创建工作目录，此处以 &lt;code&gt;~/project/ros/kinetic/catkin_ws&lt;/code&gt; 为例&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mkdir&lt;span class="w"&gt; &lt;/span&gt;-p&lt;span class="w"&gt; &lt;/span&gt;~/project/ros/kinetic/catkin_ws/src
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;创建并编辑 &lt;code&gt;~/project/ros/kinetic/.bashrc&lt;/code&gt;，此文件是给 docker 中的系统准备的 bash 配置文件&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ros-env&lt;span class="o"&gt;(){&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;source&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;/opt/ros/kinetic/setup.bash
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;source&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;/home/sihuan/catkin_ws/devel/setup.bash
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;ROS_PACKAGE_PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/home/sihuan/catkin_ws/:/opt/ros/kinetic/share/
&lt;span class="o"&gt;}&lt;/span&gt;
ros-env
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;编辑 &lt;code&gt;~/.bashrc&lt;/code&gt; 在最后添加以下内容，这是用来启动、连接、清理 docker 容器的函数&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# krstart(kinetic ros start) 会启动一个 ros:kinetic-desktop-full 容器&lt;/span&gt;
krstart&lt;span class="o"&gt;(){&lt;/span&gt;
docker&lt;span class="w"&gt; &lt;/span&gt;run&lt;span class="w"&gt; &lt;/span&gt;-it&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;--user&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;id&lt;span class="w"&gt; &lt;/span&gt;-u&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$USER&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;:&lt;span class="k"&gt;$(&lt;/span&gt;id&lt;span class="w"&gt; &lt;/span&gt;-g&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$USER&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;--env&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;DISPLAY&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;--workdir&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/home/&lt;/span&gt;&lt;span class="nv"&gt;$USER&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;--volume&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/home/&lt;/span&gt;&lt;span class="nv"&gt;$USER&lt;/span&gt;&lt;span class="s2"&gt;/project/ros/kinetic:/home/&lt;/span&gt;&lt;span class="nv"&gt;$USER&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;--volume&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/etc/group:/etc/group:ro&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;--volume&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/etc/passwd:/etc/passwd:ro&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;--volume&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/etc/shadow:/etc/shadow:ro&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;--volume&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/etc/sudoers.d:/etc/sudoers.d:ro&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;--volume&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/tmp/.X11-unix:/tmp/.X11-unix:rw&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;osrf/ros:kinetic-desktop-full&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;bash
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;# krconnect 会连接到正在运行的 kinetic docker 容器中&lt;/span&gt;
krconnect&lt;span class="o"&gt;(){&lt;/span&gt;
docker&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;exec&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-ti&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;docker&lt;span class="w"&gt; &lt;/span&gt;ps&lt;span class="w"&gt; &lt;/span&gt;-aq&lt;span class="w"&gt; &lt;/span&gt;--filter&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;ancestor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;osrf/ros:kinetic-desktop-full&lt;span class="w"&gt; &lt;/span&gt;--filter&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;status&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;running&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;bash
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;# 清理已经停止的 kinetic 容器&lt;/span&gt;
krclean&lt;span class="o"&gt;(){&lt;/span&gt;
docker&lt;span class="w"&gt; &lt;/span&gt;rm&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;docker&lt;span class="w"&gt; &lt;/span&gt;ps&lt;span class="w"&gt; &lt;/span&gt;-aq&lt;span class="w"&gt; &lt;/span&gt;--filter&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;ancestor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;osrf/ros:kinetic-desktop-full&lt;span class="w"&gt; &lt;/span&gt;--filter&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;status&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;exited
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;&lt;p&gt;Tips&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;docker 的启动脚本中使用了 &lt;code&gt;--user&lt;/code&gt; 参数并以只读方式映射了 host 机器 &lt;code&gt;/etc/group&lt;/code&gt; 等用户和组相关文件，目的是为了以当前用户 &lt;code&gt;sihuan&lt;/code&gt; 的身份登入到 docker 中，避免在 host 机器编辑源文件时候的权限问题&lt;/li&gt;
&lt;li&gt;host 机器 &lt;code&gt;/home/sihuan/project/ros/kinetic&lt;/code&gt; 目录被挂载到 docker 里 &lt;code&gt;/home/sihuan/&lt;/code&gt;  位置，也即 docker 里的 ROS 的工作空间 &lt;code&gt;/home/sihuan/catkin_ws&lt;/code&gt; 可通过 host 机器 &lt;code&gt;/home/sihuan/project/ros/kinetic/catkin_ws&lt;/code&gt; 目录进行访问、编辑。&lt;/li&gt;
&lt;li&gt;启动脚本中还影射了 X11 服务相关文件，使得在 docker 中可以访问 host 机器 X 服务以运行图形界面程序（这要求 host 机器运行 X11 服务）&lt;/li&gt;
&lt;li&gt;启用硬件加速 #TODO&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;启动容器&lt;/p&gt;
&lt;p&gt;在 host 机器上运行 &lt;code&gt;krstart&lt;/code&gt; 就可以启动一个装有 kinetic 的 docker 容器，初次启动可能会遇到一下报错，是预期内错误，使用 &lt;code&gt;catkin_make&lt;/code&gt; 来初始化工程后，就不再有这个问题。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 在 host 机器执行&lt;/span&gt;
krstart
&lt;span class="c1"&gt;# 出现以下预期内错误&lt;/span&gt;
bash:&lt;span class="w"&gt; &lt;/span&gt;/home/sihuan/catkin_ws/devel/setup.bash:&lt;span class="w"&gt; &lt;/span&gt;No&lt;span class="w"&gt; &lt;/span&gt;such&lt;span class="w"&gt; &lt;/span&gt;file&lt;span class="w"&gt; &lt;/span&gt;or&lt;span class="w"&gt; &lt;/span&gt;directory
&lt;span class="c1"&gt;# 在 docker 里进入工作目录并初始化工程&lt;/span&gt;
&lt;span class="nb"&gt;cd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;~/catkin_ws
catkin_make
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;此时再运行 &lt;code&gt;roscore&lt;/code&gt; 应该看到以下输出&lt;/p&gt;
&lt;p&gt;```
sihuan@a9d3b860cafe:~/catkin_ws$ roscore
... logging to /home/sihuan/.ros/log/fbbe12d2-dab9-11ed-a2a2-0242ac110002/roslaunch-a9d3b860cafe-521.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is &amp;lt;1GB.&lt;/p&gt;
&lt;p&gt;started roslaunch server &lt;a href="http://a9d3b860cafe:35231/"&gt;http://a9d3b860cafe:35231/&lt;/a&gt;
ros_comm version 1.12.17&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;

&lt;pre&gt;&lt;code&gt;  SUMMARY
  ========

  PARAMETERS
   * /rosdistro: kinetic
   * /rosversion: 1.12.17

  NODES

  auto-starting new master
  process[master]: started with pid [531]
  ROS_MASTER_URI=http://a9d3b860cafe:11311/

  setting /run_id to fbbe12d2-dab9-11ed-a2a2-0242ac110002
  process[rosout-1]: started with pid [544]
  started core service [/rosout]
  ```

  至此安装工作已经完成，可以在 host 机器中使用文本编辑器编辑源码，然后在 docker 中进行编译、运行。

  &amp;gt; Tips：由于 docker 中 `~/catkin_ws/src/CMakeLists.txt` 是指向 `/opt/ros/kinetic/share/catkin/cmake/toplevel.cmake` 的软连接，在 host 机器上编辑此文件会遇到一些问题，如有需要请在 docker 中编辑该文件。&lt;/code&gt;&lt;/pre&gt;
</description><author>sihuan@sakuya.love (SiHuaN)</author><guid isPermaLink="true">/archives/openeuler-fix-build/</guid><pubDate>Tue, 20 Jun 2023 11:06:00 +0806</pubDate></item><item><title>在 openEuler 22.03 SP2 上安装 ROS humble</title><link>/archives/oe2203sp2-install-ros/</link><description>&lt;p&gt;openEuler 22.03 SP2 即将发布，SP2 版本引入了 ROS humble 的支持，可以方便的使用 &lt;code&gt;dnf install ros-humble-xxx&lt;/code&gt; 来安装 ros 包。下面是在 QEMU 虚拟机上进行的步骤演示~&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;以下使用 rc6 版本进行演示，正式版发布后，可省略更换软件源的步骤&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;下载 openEuler  虚拟机镜像，可前往&lt;a href="http://121.36.84.172/dailybuild/EBS-openEuler-22.03-LTS-SP2/"&gt;此处&lt;/a&gt;查看&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;axel&lt;span class="w"&gt; &lt;/span&gt;-n&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;64&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;http://121.36.84.172/dailybuild/EBS-openEuler-22.03-LTS-SP2/rc6_openeuler-2023-06-29-20-25-36/virtual_machine_img/x86_64/openEuler-22.03-LTS-SP2-x86_64.qcow2.xz
&lt;span class="c1"&gt;# 解压&lt;/span&gt;
unxz&lt;span class="w"&gt; &lt;/span&gt;openEuler-22.03-LTS-SP2-x86_64.qcow2.xz
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;&lt;p&gt;Tips: 使用 &lt;code&gt;axel&lt;/code&gt; 等多线程下载工具可以显著提升下载速度&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;启动 openEuler 虚拟机&lt;/p&gt;
&lt;p&gt;以下脚本可以方便的使用 &lt;code&gt;qemu-system-x86&lt;/code&gt; 启动虚拟机并配置好端口映射，方便 使用 ssh 连入。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/usr/bin/env bash&lt;/span&gt;

&lt;span class="c1"&gt;# The script is created for starting a riscv64 qemu virtual machine with specific parameters.&lt;/span&gt;

&lt;span class="nv"&gt;RESTORE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-en&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;\001\033[0m\002&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;YELLOW&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;-en&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;\001\033[00;33m\002&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;## Configuration&lt;/span&gt;
&lt;span class="nv"&gt;vcpu&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;8&lt;/span&gt;
&lt;span class="nv"&gt;memory&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;16&lt;/span&gt;
&lt;span class="nv"&gt;memory_append&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;expr&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$memory&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="se"&gt;\*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1024&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;
&lt;span class="nv"&gt;drive&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;ls&lt;span class="w"&gt; &lt;/span&gt;*.qcow2&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;ssh_port&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;12055&lt;/span&gt;

&lt;span class="nv"&gt;cmd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;qemu-system-x86_64 \&lt;/span&gt;
&lt;span class="s2"&gt;  -smp &amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$vcpu&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot; -m &amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$memory&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;G \&lt;/span&gt;
&lt;span class="s2"&gt;  -drive file=&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$drive&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;,format=qcow2,id=hd0 \&lt;/span&gt;
&lt;span class="s2"&gt;  -nic user,model=virtio,hostfwd=tcp::&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$ssh_port&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;-:22&amp;quot;&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;YELLOW&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;::&lt;span class="w"&gt; &lt;/span&gt;Starting&lt;span class="w"&gt; &lt;/span&gt;VM...&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;RESTORE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;YELLOW&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;::&lt;span class="w"&gt; &lt;/span&gt;Using&lt;span class="w"&gt; &lt;/span&gt;following&lt;span class="w"&gt; &lt;/span&gt;configuration&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;RESTORE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;YELLOW&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;vCPU&lt;span class="w"&gt; &lt;/span&gt;Cores:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$vcpu&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;RESTORE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;YELLOW&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;Memory:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$memory&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;G&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;RESTORE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;YELLOW&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;Disk:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$drive&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;RESTORE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;YELLOW&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;SSH&lt;span class="w"&gt; &lt;/span&gt;Port:&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$ssh_port&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;RESTORE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;YELLOW&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;::&lt;span class="w"&gt; &lt;/span&gt;NOTE:&lt;span class="w"&gt; &lt;/span&gt;Make&lt;span class="w"&gt; &lt;/span&gt;sure&lt;span class="w"&gt; &lt;/span&gt;ONLY&lt;span class="w"&gt; &lt;/span&gt;ONE&lt;span class="w"&gt; &lt;/span&gt;.qcow2&lt;span class="w"&gt; &lt;/span&gt;file&lt;span class="w"&gt; &lt;/span&gt;is&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;RESTORE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;YELLOW&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;the&lt;span class="w"&gt; &lt;/span&gt;current&lt;span class="w"&gt; &lt;/span&gt;directory&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;RESTORE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;YELLOW&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;::&lt;span class="w"&gt; &lt;/span&gt;Tip:&lt;span class="w"&gt; &lt;/span&gt;Try&lt;span class="w"&gt; &lt;/span&gt;setting&lt;span class="w"&gt; &lt;/span&gt;DNS&lt;span class="w"&gt; &lt;/span&gt;manually&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;QEMU&lt;span class="w"&gt; &lt;/span&gt;user&lt;span class="w"&gt; &lt;/span&gt;network&lt;span class="w"&gt; &lt;/span&gt;doesn&lt;span class="se"&gt;\&amp;#39;&lt;/span&gt;t&lt;span class="w"&gt; &lt;/span&gt;work&lt;span class="w"&gt; &lt;/span&gt;well.&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;RESTORE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;YELLOW&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;::&lt;span class="w"&gt; &lt;/span&gt;HOWTO&lt;span class="w"&gt; &lt;/span&gt;-&lt;span class="se"&gt;\&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;https://serverfault.com/a/810639&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;RESTORE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;

sleep&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;

&lt;span class="nb"&gt;eval&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;$cmd&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;将上诉脚本保存至镜像文件同目录，并添加可执行权限，然后执行此脚本就可以启动 openEuler 虚拟机，虚拟机的 &lt;code&gt;22&lt;/code&gt; 号端口被映射到本机的 &lt;code&gt;12055&lt;/code&gt;号端口。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;配置软件源&lt;/p&gt;
&lt;p&gt;使用 ssh 登入虚拟机 &lt;code&gt;root&lt;/code&gt; 账户，其密码是 &lt;code&gt;openEuler12#$&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;配置软件源，编辑 &lt;code&gt;/etc/yum.repos.d/openEuler.repo&lt;/code&gt; 文件，更换为以下内容：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#generic-repos is licensed under the Mulan PSL v2.&lt;/span&gt;
&lt;span class="c1"&gt;#You can use this software according to the terms and conditions of the Mulan PSL v2.&lt;/span&gt;
&lt;span class="c1"&gt;#You may obtain a copy of Mulan PSL v2 at:&lt;/span&gt;
&lt;span class="c1"&gt;#    http://license.coscl.org.cn/MulanPSL2&lt;/span&gt;
&lt;span class="c1"&gt;#THIS SOFTWARE IS PROVIDED ON AN &amp;quot;AS IS&amp;quot; BASIS, WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR&lt;/span&gt;
&lt;span class="c1"&gt;#IMPLIED, INCLUDING BUT NOT LIMITED TO NON-INFRINGEMENT, MERCHANTABILITY OR FIT FOR A PARTICULAR&lt;/span&gt;
&lt;span class="c1"&gt;#PURPOSE.&lt;/span&gt;
&lt;span class="c1"&gt;#See the Mulan PSL v2 for more details.&lt;/span&gt;

&lt;span class="k"&gt;[OS]&lt;/span&gt;
&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;OS&lt;/span&gt;
&lt;span class="n"&gt;baseurl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;http://&lt;/span&gt;&lt;span class="mf"&gt;121.36&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;84&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;172&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dailybuild&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;EBS-openEuler-22&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;03-LTS-SP2&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rc6_openeuler-2023-06-29-20-25-36&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;OS&lt;/span&gt;&lt;span class="err"&gt;/$&lt;/span&gt;&lt;span class="n"&gt;basearch&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;
&lt;span class="n"&gt;enabled&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;gpgcheck&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;gpgkey&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;http://&lt;/span&gt;&lt;span class="mf"&gt;121.36&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;84&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;172&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dailybuild&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;EBS-openEuler-22&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;03-LTS-SP2&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rc6_openeuler-2023-06-29-20-25-36&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;OS&lt;/span&gt;&lt;span class="err"&gt;/$&lt;/span&gt;&lt;span class="n"&gt;basearch&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;RPM-GPG-KEY-openEuler&lt;/span&gt;

&lt;span class="k"&gt;[everything]&lt;/span&gt;
&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;everything&lt;/span&gt;
&lt;span class="n"&gt;baseurl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;http://&lt;/span&gt;&lt;span class="mf"&gt;121.36&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;84&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;172&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dailybuild&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;EBS-openEuler-22&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;03-LTS-SP2&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rc6_openeuler-2023-06-29-20-25-36&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;everything&lt;/span&gt;&lt;span class="err"&gt;/$&lt;/span&gt;&lt;span class="n"&gt;basearch&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;
&lt;span class="n"&gt;enabled&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;gpgcheck&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;gpgkey&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;http://&lt;/span&gt;&lt;span class="mf"&gt;121.36&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;84&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;172&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dailybuild&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;EBS-openEuler-22&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;03-LTS-SP2&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rc6_openeuler-2023-06-29-20-25-36&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;everything&lt;/span&gt;&lt;span class="err"&gt;/$&lt;/span&gt;&lt;span class="n"&gt;basearch&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;RPM-GPG-KEY-openEuler&lt;/span&gt;

&lt;span class="k"&gt;[EPOL]&lt;/span&gt;
&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;EPOL&lt;/span&gt;
&lt;span class="n"&gt;baseurl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;http://&lt;/span&gt;&lt;span class="mf"&gt;121.36&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;84&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;172&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dailybuild&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;EBS-openEuler-22&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;03-LTS-SP2&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rc6_openeuler-2023-06-29-20-25-36&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;EPOL&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="err"&gt;/$&lt;/span&gt;&lt;span class="n"&gt;basearch&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;
&lt;span class="n"&gt;metalink&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;https://mirrors.openeuler.org/metalink?repo=$releasever/EPOL/main&amp;amp;arch=$basearch&lt;/span&gt;
&lt;span class="n"&gt;metadata_expire&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;
&lt;span class="n"&gt;enabled&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;gpgcheck&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;gpgkey&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;http://&lt;/span&gt;&lt;span class="mf"&gt;121.36&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;84&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;172&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dailybuild&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;EBS-openEuler-22&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;03-LTS-SP2&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rc6_openeuler-2023-06-29-20-25-36&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;OS&lt;/span&gt;&lt;span class="err"&gt;/$&lt;/span&gt;&lt;span class="n"&gt;basearch&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;RPM-GPG-KEY-openEuler&lt;/span&gt;

&lt;span class="k"&gt;[debuginfo]&lt;/span&gt;
&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;debug&lt;/span&gt;&lt;span class="mf"&gt;inf&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;
&lt;span class="n"&gt;baseurl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;http://&lt;/span&gt;&lt;span class="mf"&gt;121.36&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;84&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;172&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dailybuild&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;EBS-openEuler-22&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;03-LTS-SP2&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rc6_openeuler-2023-06-29-20-25-36&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;debuginfo&lt;/span&gt;&lt;span class="err"&gt;/$&lt;/span&gt;&lt;span class="n"&gt;basearch&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;
&lt;span class="n"&gt;metalink&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;https://mirrors.openeuler.org/metalink?repo=$releasever/debug&lt;/span&gt;&lt;span class="mf"&gt;inf&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="err"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;arch&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;$basearch&lt;/span&gt;
&lt;span class="n"&gt;metadata_expire&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;
&lt;span class="n"&gt;enabled&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;gpgcheck&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;gpgkey&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;http://&lt;/span&gt;&lt;span class="mf"&gt;121.36&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;84&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;172&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dailybuild&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;EBS-openEuler-22&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;03-LTS-SP2&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rc6_openeuler-2023-06-29-20-25-36&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;debuginfo&lt;/span&gt;&lt;span class="err"&gt;/$&lt;/span&gt;&lt;span class="n"&gt;basearch&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;RPM-GPG-KEY-openEuler&lt;/span&gt;

&lt;span class="k"&gt;[source]&lt;/span&gt;
&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;source&lt;/span&gt;
&lt;span class="n"&gt;baseurl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;http://&lt;/span&gt;&lt;span class="mf"&gt;121.36&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;84&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;172&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dailybuild&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;EBS-openEuler-22&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;03-LTS-SP2&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rc6_openeuler-2023-06-29-20-25-36&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;source&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;
&lt;span class="n"&gt;metalink&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;https://mirrors.openeuler.org/metalink?repo=$releasever&amp;amp;arch=source&lt;/span&gt;
&lt;span class="n"&gt;metadata_expire&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;
&lt;span class="n"&gt;enabled&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;gpgcheck&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;gpgkey&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;http://&lt;/span&gt;&lt;span class="mf"&gt;121.36&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;84&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;172&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dailybuild&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;EBS-openEuler-22&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;03-LTS-SP2&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rc6_openeuler-2023-06-29-20-25-36&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;source&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;RPM-GPG-KEY-openEuler&lt;/span&gt;

&lt;span class="k"&gt;[update]&lt;/span&gt;
&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;update&lt;/span&gt;
&lt;span class="n"&gt;baseurl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;http://&lt;/span&gt;&lt;span class="mf"&gt;121.36&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;84&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;172&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dailybuild&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;EBS-openEuler-22&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;03-LTS-SP2&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rc6_openeuler-2023-06-29-20-25-36&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="err"&gt;/$&lt;/span&gt;&lt;span class="n"&gt;basearch&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;
&lt;span class="n"&gt;metalink&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;https://mirrors.openeuler.org/metalink?repo=$releasever/update&amp;amp;arch=$basearch&lt;/span&gt;
&lt;span class="n"&gt;metadata_expire&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;
&lt;span class="n"&gt;enabled&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;gpgcheck&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;gpgkey&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;http://&lt;/span&gt;&lt;span class="mf"&gt;121.36&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;84&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;172&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dailybuild&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;EBS-openEuler-22&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;03-LTS-SP2&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rc6_openeuler-2023-06-29-20-25-36&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;OS&lt;/span&gt;&lt;span class="err"&gt;/$&lt;/span&gt;&lt;span class="n"&gt;basearch&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;RPM-GPG-KEY-openEuler&lt;/span&gt;

&lt;span class="k"&gt;[update-source]&lt;/span&gt;
&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;update-source&lt;/span&gt;
&lt;span class="n"&gt;baseurl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;http://&lt;/span&gt;&lt;span class="mf"&gt;121.36&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;84&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;172&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dailybuild&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;EBS-openEuler-22&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;03-LTS-SP2&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rc6_openeuler-2023-06-29-20-25-36&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;update&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;source&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;
&lt;span class="n"&gt;metalink&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;https://mirrors.openeuler.org/metalink?repo=$releasever/update&amp;amp;arch=source&lt;/span&gt;
&lt;span class="n"&gt;metadata_expire&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;
&lt;span class="n"&gt;enabled&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;gpgcheck&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;gpgkey&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;http://&lt;/span&gt;&lt;span class="mf"&gt;121.36&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;84&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;172&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dailybuild&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;EBS-openEuler-22&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;03-LTS-SP2&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;rc6_openeuler-2023-06-29-20-25-36&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;source&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;RPM-GPG-KEY-openEuler&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;&lt;p&gt;Tips: 正式版发布后可以跳过上述修改步骤&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;安装 &lt;code&gt;openeuler-ros&lt;/code&gt; 包，这个包的作用是帮助配置 ROS humble 的软件源&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;dnf&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;openeuler-ros
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;安装完成后需要修改 &lt;code&gt;/etc/yum.repos.d/openEulerROS.repo&lt;/code&gt; 文件，改为一下内容&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[openEulerROS-humble]&lt;/span&gt;
&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;openEulerROS-humble&lt;/span&gt;
&lt;span class="n"&gt;baseurl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;http://&lt;/span&gt;&lt;span class="mf"&gt;121.36&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;84&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;172&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dailybuild&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;EBS-openEuler-22&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;03-LTS-SP2&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;openeuler-2023-06-29-20-25-36&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;EPOL&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;multi_version&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ROS&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;humble&lt;/span&gt;&lt;span class="err"&gt;/$&lt;/span&gt;&lt;span class="n"&gt;basearch&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;
&lt;span class="n"&gt;enabled&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;gpgcheck&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;

&lt;span class="k"&gt;[openEulerROS-humble-source]&lt;/span&gt;
&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;openEulerROS-humble-source&lt;/span&gt;
&lt;span class="n"&gt;baseurl&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="err"&gt;http://&lt;/span&gt;&lt;span class="mf"&gt;121.36&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;84&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;172&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dailybuild&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;EBS-openEuler-22&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;03-LTS-SP2&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;openeuler-2023-06-29-20-25-36&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;EPOL&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;multi_version&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;ROS&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;humble&lt;/span&gt;&lt;span class="err"&gt;/&lt;/span&gt;&lt;span class="n"&gt;source&lt;/span&gt;
&lt;span class="n"&gt;enabled&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;gpgcheck&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;&lt;p&gt;Tips: 正式版发布后可以跳过上述修改步骤&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;现在就可以安装需要的 ros 包啦！&lt;/p&gt;
&lt;p&gt;使用 &lt;code&gt;dnf install ros-humble-xxx&lt;/code&gt; 就可安装指定的 ros 软件包&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 以小乌龟（ros-humble-turtlesim）为例&lt;/span&gt;
dnf&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;ros-humble-turtlesim
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1264" data-height="986" src="/archives/assets/6b70264addbdfc3ae382102c2e52aad7.png" alt="image-20230630191602955" /&gt;&lt;figcaption&gt;image-20230630191602955&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;如果不介意安装全家桶的话，可以使用 &lt;code&gt;dnf install ros-humble-*&lt;/code&gt; 来安装目前源里的所有 ros humble 软件包。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;跑个 demo 康康？&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#安装 `ros-humble-demo-nodes-cpp` 包&lt;/span&gt;
dnf&lt;span class="w"&gt; &lt;/span&gt;install&lt;span class="w"&gt; &lt;/span&gt;ros-humble-demo-nodes-cpp
&lt;span class="c1"&gt;# 配置环境&lt;/span&gt;
&lt;span class="nb"&gt;source&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;/opt/ros/humble/setup.sh
&lt;span class="c1"&gt;# 分别执行以下两条命令&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;figure&gt;&lt;img data-width="1264" data-height="986" src="/archives/assets/92e21f75c1906b01ceb4130b0a4e56b1.png" alt="image-20230630192153082" /&gt;&lt;figcaption&gt;image-20230630192153082&lt;/figcaption&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
</description><author>sihuan@sakuya.love (SiHuaN)</author><guid isPermaLink="true">/archives/oe2203sp2-install-ros/</guid><pubDate>Thu, 29 Jun 2023 11:06:00 +0806</pubDate></item><item><title>JuNest！</title><link>/archives/junest/</link><description>&lt;blockquote&gt;&lt;p&gt;有些时候可能会拿到一些没有 root 权限的机器，找管理员安装软件不方便，而自己编译安装软件管理起来也比较麻烦，还要处理各种依赖。在群友 SteamedFish 的推荐下用上了 JuNest 这个工具。如果之前有使用过 ArchLinux 的包管理的话，用起来会很舒服～ 没有的话 &lt;code&gt;pacman&lt;/code&gt; 也挺好学的。&lt;br&gt;
主要应用场景就是在没有 root 权限的机器上安装各种软件）&lt;br&gt;
这个项目托管在 GitHub : &lt;a href="https://github.com/fsquillace/junest"&gt;https://github.com/fsquillace/junest&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;起因&lt;/h2&gt;
&lt;p&gt;我自己拿到了一台服务器的账号，但是没有 root 权限，上面缺很多软件，还有一些软件比较老旧。host 机器的操作系统是 Debian，一开始我尝试直接使用 apt download 下载软件包，然后 dpkg 安装到我的家目录，后来发现依赖处理起来很麻烦。然后在群友的推荐下去了解了 &lt;code&gt;nix&lt;/code&gt;、&lt;code&gt;gentoo-prefix&lt;/code&gt; 和  &lt;code&gt;linuxbrew&lt;/code&gt; 等工具，一番文档看下来，发现它们大多在安装时候需要 root 权限（后续使用可能不用），而完全不需要 root 权限的 &lt;code&gt;portable-nix&lt;/code&gt; 现在看起来缺乏维护。最后了解到了 &lt;code&gt;junest&lt;/code&gt;，太好用了！于是写篇博客记录一下，主要介绍一下安装方法，和后续使用中我自己的一些习惯（之后可能会写一下如何直接 ssh 连入到 &lt;code&gt;junest&lt;/code&gt; 的容器中去，主要应用场景就是给 vscode remote 用了）。&lt;/p&gt;
&lt;h2&gt;准备&lt;/h2&gt;
&lt;h3&gt;读项目介绍&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;JuNest&lt;/strong&gt; (Jailed User Nest) is a lightweight Arch Linux based distribution
that allows the creation of disposable and partially isolated GNU/Linux environments
within any generic GNU/Linux host OS and without requiring root
privileges to install packages.&lt;/p&gt;
&lt;p&gt;JuNest is built around &lt;a href="https://wiki.archlinux.org/index.php/Pacman"&gt;pacman&lt;/a&gt;,
the Arch Linux package manager, which allows access
to a wide range of packages from the Arch Linux repositories.&lt;/p&gt;
&lt;p&gt;The main advantages of using JuNest include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Install packages without root privileges.&lt;/li&gt;
&lt;li&gt;Create partially isolated environments in which you can install packages without risking mishaps on production systems.&lt;/li&gt;
&lt;li&gt;Access a wider range of packages, particularly on GNU/Linux distros with comparatively limited repositories (such as CentOS and Red Hat).&lt;/li&gt;
&lt;li&gt;Run on a different architecture from the host OS via QEMU.&lt;/li&gt;
&lt;li&gt;Available for &lt;code&gt;x86_64&lt;/code&gt; and &lt;code&gt;arm&lt;/code&gt; architectures but you can build your own image from scratch too!&lt;/li&gt;
&lt;li&gt;All Arch Linux lovers can enjoy their favourite distro everywhere!&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;JuNest follows the &lt;a href="https://wiki.archlinux.org/index.php/The_Arch_Way"&gt;Arch Linux philosophy&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;准备系统&lt;/h3&gt;
&lt;p&gt;你至少要有一个可以登录的账户，全过程不需要 root 权限，junest 支持 &lt;code&gt;namespace&lt;/code&gt;、&lt;code&gt;proot&lt;/code&gt; 和 &lt;code&gt;chroot&lt;/code&gt; 三种后端，其中 &lt;code&gt;chroot&lt;/code&gt; 需要 root 权限，就不多做讨论了。前两者我更推荐 &lt;code&gt;namespace&lt;/code&gt; 的实现，具体区别可以去阅读 junset 的文档（&lt;del&gt;其实在 junest 的文档里安装使用也写得很清楚了&lt;/del&gt;）。可以查阅&lt;a href="https://github.com/fsquillace/junest/wiki/Linux-distros-with-user-namespace-enabled-by-default"&gt;这个表格&lt;/a&gt;来查看自己的 host 系统是否默认开启了用户命名空间。ArchLinux 和比较新版本的 Debian、Ubuntu 都是开了的。&lt;/p&gt;
&lt;h2&gt;安装&lt;/h2&gt;
&lt;blockquote&gt;&lt;p&gt;junest 还是有一些依赖的，需要服务器上已经满足以下依赖&lt;br&gt;
bash (&amp;gt;=4.0) GNU coreutils&lt;br&gt;
另外安装过程中有用到 git&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;使用 ssh 链接到服务器，将 junest 仓库 clone 到 &lt;code&gt;~/.local/share/junest&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 新建目录&lt;/span&gt;
mkdir&lt;span class="w"&gt; &lt;/span&gt;~/.local/share/junest
&lt;span class="c1"&gt;# clone 仓库（网络问题是另外的话题）&lt;/span&gt;
git&lt;span class="w"&gt; &lt;/span&gt;clone&lt;span class="w"&gt; &lt;/span&gt;https://github.com/fsquillace/junest.git&lt;span class="w"&gt; &lt;/span&gt;~/.local/share/junest
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;将 junest 添加到 PATH，以便你可以方便的使用它&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;~/.local/share/junest/bin:&lt;span class="nv"&gt;$PATH&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;如果不想每次都执行上述 export 命令可以将它写入到 &lt;code&gt;~/.bashrc&lt;/code&gt; 中，追加到文件末尾即可。完成编辑后需要执行 &lt;code&gt;source ~/.bashrc&lt;/code&gt; 生效，或者干脆登出 ssh 重新登录。&lt;/p&gt;
&lt;p&gt;现在你可以设置 &lt;code&gt;JUNEST_HOME&lt;/code&gt; 这个环境变量以控制 junest 的安装位置，默认是 &lt;code&gt;.junest&lt;/code&gt;，我是使用了默认的位置&lt;/p&gt;
&lt;p&gt;使用以下命令完成安装&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;junest&lt;span class="w"&gt; &lt;/span&gt;setup
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;等待执行完成，没有出错的话就完成了安装。&lt;/p&gt;
&lt;h2&gt;使用 junest 环境&lt;/h2&gt;
&lt;p&gt;在你完成安装之后，ssh 连入服务器是在 host 机器的环境当中，现在你使用的各种工具都是 host 机器提供的。&lt;br&gt;
有以下几种方式可以使用 junest 里的 archlinux 提供的软件。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;使用 junest 命令进入到容器里&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 进入容器&lt;/span&gt;
&lt;span class="w"&gt; &lt;/span&gt;junest
&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;# 现在已经在 junest 里面了，所以可以使用 pacman&lt;/span&gt;
&lt;span class="w"&gt; &lt;/span&gt;pacman&lt;span class="w"&gt; &lt;/span&gt;--version
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;给 junest 命令传递参数（？）&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 现在是在 host 环境上，直接运行以下命令来使用 junest 容器里的 pacman&lt;/span&gt;
&lt;span class="w"&gt; &lt;/span&gt;junest&lt;span class="w"&gt; &lt;/span&gt;pacman&lt;span class="w"&gt; &lt;/span&gt;--version
&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;直接在 host 机器上使用 junest 里安装的程序&lt;/p&gt;
&lt;p&gt;我不推荐这种方式，原因是这种情况会优先使用 host 机器上的程序，如果你 host 机器上安装了老版本（不符合需求的）程序，junest 里安装了新的版本，在这种情况下会优先使用 host 机器上的版本。&lt;br&gt;
 如果确实这种方式的，可以参考官方文档：&lt;a href="https://github.com/fsquillace/junest/tree/master?tab=readme-ov-file#run-junest-installed-programs-directly-from-host-os"&gt;https://github.com/fsquillace/junest/tree/master?tab=readme-ov-file#run-junest-installed-programs-directly-from-host-os&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;我自己比较推荐第一种方式，就是直接进入到 junest 容器中，完全使用 junest 里的程序，和 host 机器划清界限（&lt;br&gt;
可以在 &lt;code&gt;~/.bashrc&lt;/code&gt; 中追加以下内容来使每次 ssh 连入后自动进入 junest 环境。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;!&lt;span class="w"&gt; &lt;/span&gt;-f&lt;span class="w"&gt; &lt;/span&gt;/usr/bin/pacman&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;then&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;junest
&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;之后的配置&lt;/h2&gt;
&lt;p&gt;通过 junest 命令进入环境之后，你面对的就是一个全新的 archlinux 系统了，在这里你拥有（虚假的）root 权限，可以使用 sudo 命令&lt;br&gt;
再一切开始之前，你需要编辑 pacman 的配置文件来启用一个镜像站点。&lt;/p&gt;
&lt;p&gt;如果你在 junest 里，那么你需要编辑的文件是 &lt;code&gt;/etc/pacman.d/mirrorlist&lt;/code&gt;，如果 junest 环境里尚未有你喜欢的编辑工具，可以使用 &lt;code&gt;exit&lt;/code&gt; 命令或 &lt;code&gt;Ctrl+D&lt;/code&gt; 退出 junest 到 host 环境，然后利用 host 环境里已经有的编辑工具去编辑 &lt;code&gt;~/.junest/etc/pacman.d/mirrorlist&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;在上面提及的 mirrorlist 文件最前段添加你想使用的镜像站站点，比如，要使用山东科技大学的开源镜像网站，添加以下内容&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Server = https://mirrors.sdust.edu.cn/archlinux/$repo/os/$arch
# 清华大学 tuna 镜像站的话就是以下内容
# Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;完成上述编辑之后，确保你回到 junest 环境中，执行以下命令来更新一下 junest 里的 archlinux 同时安装一些相当基础的软件&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo&lt;span class="w"&gt; &lt;/span&gt;pacman&lt;span class="w"&gt; &lt;/span&gt;-Syyu
sudo&lt;span class="w"&gt; &lt;/span&gt;pacman&lt;span class="w"&gt; &lt;/span&gt;-S&lt;span class="w"&gt; &lt;/span&gt;glibc
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;完成之后你就可以用 pacman 来安装自己所需的软件包了，例如&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# 安装 vim、ninja、cmake 和 python&lt;/span&gt;
sudo&lt;span class="w"&gt; &lt;/span&gt;pacman&lt;span class="w"&gt; &lt;/span&gt;-S&lt;span class="w"&gt; &lt;/span&gt;vim&lt;span class="w"&gt; &lt;/span&gt;ninja&lt;span class="w"&gt; &lt;/span&gt;cmake&lt;span class="w"&gt; &lt;/span&gt;python
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;关于 pacman 的用法可以去看 archlinux 的文档，另外需要注意 archlinux 上有些包名可能和你正在使用的发行版不一样，可以用 &lt;code&gt;-Ss&lt;/code&gt; 参数来查找软件包，例如&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$ &lt;/span&gt;pacman&lt;span class="w"&gt; &lt;/span&gt;-Ss&lt;span class="w"&gt; &lt;/span&gt;ninja
&lt;span class="go"&gt;extra/gn 0.2130.7367b0df-1&lt;/span&gt;
&lt;span class="go"&gt;    Meta-build system that generates build files for Ninja&lt;/span&gt;
&lt;span class="go"&gt;extra/ninja 1.11.1-3 [installed]&lt;/span&gt;
&lt;span class="go"&gt;    Small build system with a focus on speed&lt;/span&gt;
&lt;span class="go"&gt;extra/ninjas2 0.2.0-3&lt;/span&gt;
&lt;span class="go"&gt;    A sample slicer audio plugin&lt;/span&gt;
&lt;span class="go"&gt;extra/ninjas2-lv2 0.2.0-3 (lv2-plugins pro-audio)&lt;/span&gt;
&lt;span class="go"&gt;    A sample slicer audio plugin - LV2 plugin&lt;/span&gt;
&lt;span class="go"&gt;extra/ninjas2-standalone 0.2.0-3 (pro-audio)&lt;/span&gt;
&lt;span class="go"&gt;    A sample slicer audio plugin - JACK standalone&lt;/span&gt;
&lt;span class="go"&gt;extra/ninjas2-vst 0.2.0-3 (vst-plugins pro-audio)&lt;/span&gt;
&lt;span class="go"&gt;    A sample slicer audio plugin - VST plugin&lt;/span&gt;
&lt;span class="go"&gt;extra/samurai 1.2-2&lt;/span&gt;
&lt;span class="go"&gt;    ninja-compatible build tool written in C&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;具体的用法还是去参考 archlinux 的文档吧～&lt;/p&gt;
&lt;p&gt;现在你可以在 junest 里自由的安装并使用各种所需的软件而全程不需要 host 机器的 root 权限。&lt;/p&gt;
&lt;h2&gt;挖坑&lt;/h2&gt;
&lt;p&gt;有时候可能会有直接 ssh 连接到 junest 容器里的需求（而不是先连接到 host 机器，再使用 junest 命令进入容器），我的应用场景就是给 vscode remote 用。大概需要以下步骤&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;给 junest 里的 archlinux 安装一个打过补丁的 openssh（为的是解决一点小小的权限问题）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;配置并启动 junest 里的 sshd 服务&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;可能的，如果你的 host 机器有防火墙，不能将 junest 里的 sshd 服务暴露到你可以访问的网络上，就需要配置下跳板&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;关于上述步骤可以参考  &lt;a href="https://medium.com/@ayaka_45434/installing-packages-on-linux-without-sudo-privilege-using-junest-5fe7523c9d86#:~:text=Step%205%3A%20Install%20and%20run%20an%20SSH%20server%20in%20the%20JuNest%20environment"&gt;@ayaka_45434/installing-packages-on-linux-without-sudo-privilege-using-junest&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;具体步骤和可能踩的坑我可能也许大概会再水一篇 blog :)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;EOF&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;快去看 It's MyGO 吧，相当好看😭😭😭&lt;/p&gt;
</description><author>sihuan@sakuya.love (SiHuaN)</author><guid isPermaLink="true">/archives/junest/</guid><pubDate>Wed, 31 Jan 2024 11:06:00 +0806</pubDate></item></channel></rss>